<h1>About</h1>
<p>課程名稱: 電腦輔助設計與實習</p>
<p><a href="https://mde.tw/cp_demo"></a></p>
<p>分組倉儲 demo 網站: <a href="https://mde.tw/cad_demo">https://mde.tw/cad_demo</a></p>
<p>demo 倉儲: <a href="https://github.com/mdecycu/cad_demo">https://github.com/mdecycu/cad_demo</a> </p>
<p>課程評分:</p>
<p style="padding-left: 30px;"><span style="background-color: #ffff00;">學習心得報告 (60%)</span> - MS Teams 線上參與，6人一組每三週發表學習心得。</p>
<p style="padding-left: 60px;">w3、w7、w10、w14、w17、w18</p>
<p style="padding-left: 60px;"><span style="background-color: #ffcc99;">學習心得報告主題</span>:</p>
<p style="padding-left: 60px;">w3: 用什麼套件完成 <a href="https://youtu.be/iOLFP90DneY">5-bar Linkage Plotter</a> 與 <a href="https://mde.tw/cad2025/content/OpenDuck.html">Openduck mini</a> 零組件設計繪圖？ <a href="https://solvespace.com">Solvespace</a>, <a href="https://plm.sw.siemens.com/en-US/nx/cad-online/">Siemens NX</a>, <a href="https://www.onshape.com/en/">Onshape</a> 或其他？各有什麼優缺點？ (<a href="https://mde.tw/cad2025/downloads/plotter.7z">plotter.7z</a>, <a href="/downloads/open_duck_mini.7z">open_duck_mini.7z</a>)</p>
<p style="padding-left: 60px;">w7 (<span style="background-color: #ccffcc;">2a 採 Youtube 影片簡報</span>): <a href="https://youtu.be/iOLFP90DneY">5-bar Linkage Plotter</a> 與 <a href="https://mde.tw/cad2025/content/OpenDuck.html">Openduck mini</a> 零組件設計繪製完成之後，如何切割零件? 為何要切割零件？ 如何利用 <a href="https://cyberbotics.com/">Webots</a> 進行後續的控制系統設計與動態模擬 (Dynamic Simulation)？(<a href="https://mde.tw/cad2025/downloads/plotter_project.7z">plotter_project.7z</a>)</p>
<p style="padding-left: 60px;">w10: <a href="https://cyberbotics.com/">Webots</a> 是什麼？有什麼特點？ 如何進行場景模擬？ 如何用 Python 進行控制系統設計？ (<a href="https://cyberbotics.com/doc/guide/tutorials">Tutorial</a>)</p>
<p style="padding-left: 60px;">w14: <a href="https://cyberbotics.com/">Webots</a> 的模型有沒有辦法用程式方法建立? 有沒有辦法直接從 CAD 套件中轉出 <a href="https://cyberbotics.com/">Webots</a> 的場景模型？</p>
<p style="padding-left: 60px;">w17: 如何實作一套 <a href="https://youtu.be/iOLFP90DneY">5-bar Linkage Plotter</a> 與 <a href="https://mde.tw/cad2025/content/OpenDuck.html">Openduck mini</a>？(<a href="https://la.disneyresearch.com/publication/design-and-control-of-a-bipedal-robotic-character/">Disney Bipedal Robot</a>)</p>
<p style="padding-left: 60px;">w18: 課程總結</p>
<p style="padding-left: 30px;"><span style="background-color: #ffff00;">個人與分組網站維護 (40%)</span> - 每週至少兩次推送與課程進度相關的學習內容與心得。</p>
<p style="padding-left: 60px;">w9 期中自評、w18 期末自評</p>
<h1>Reading</h1>
<p>英文資料基本閱讀能力自我查驗:</p>
<p style="padding-left: 30px;">認不認得這 <a href="/downloads/2000_words.txt">2000_words.txt</a>，<a href="/downloads/5000_words.txt">5000_words.txt</a> 呢?</p>
<h1>CAD</h1>
<p>參數式零組件繪圖相關參考資料:</p>
<p style="padding-left: 30px;">AutoDesk Inventor:</p>
<p style="padding-left: 60px;"><a href="/downloads/autodesk_inventor_api.7z">autodesk_inventor_api.7z</a></p>
<p style="padding-left: 30px;">SolidWorks:</p>
<p style="padding-left: 60px;"><a href="/downloads/solidworks_basics.pdf">solidworks_basics.pdf</a></p>
<p style="padding-left: 60px;"><a href="/downloads/Solidworks_ref.7z">Solidworks_ref.7z</a></p>
<p style="padding-left: 30px;">Siemens NX:</p>
<p style="padding-left: 60px;"><a href="/downloads/nx_python_examples.pdf">nx_python_examples.pdf</a></p>
<p style="padding-left: 60px;"><a href="/downloads/nxopen_python_ref.7z">nxopen_python_ref.7z</a></p>
<p style="padding-left: 60px;"><a href="/downloads/NXOpen_Getting_Started_2017.pdf">NXOpen_Getting_Started_2017.pdf</a></p>
<p style="padding-left: 60px;"><a href="/downloads/NXOpen_Getting_Started_2019.pdf">NXOpen_Getting_Started_2019.pdf</a></p>
<p style="padding-left: 60px;"><a href="/downloads/SNAP_Getting_Started_v12.pdf">SNAP_Getting_Started_v12.pdf</a></p>
<p style="padding-left: 30px;">Solvespace:</p>
<p style="padding-left: 60px;"><a href="/downloads/solvespace-documentation.pdf">solvespace-documentation.pdf</a></p>
<p style="padding-left: 60px;"><a href="https://solvespace.readthedocs.io/en/latest/">https://solvespace.readthedocs.io/en/latest/</a></p>
<p style="padding-left: 60px;"><a href="https://solvespace.com/tutorial.pl">https://solvespace.com/tutorial.pl</a></p>
<p style="padding-left: 60px;"><a href="https://youtu.be/vBNAIMiomls">https://youtu.be/vBNAIMiomls</a></p>
<p style="padding-left: 60px;"><a href="https://arachnoid.com/Computer_Aided_Design/index.html">https://arachnoid.com/Computer_Aided_Design/index.html</a></p>
<p style="padding-left: 60px;"><a href="https://news.ycombinator.com/item?id=30625341">https://news.ycombinator.com/item?id=30625341</a></p>
<p style="padding-left: 60px;"><a href="https://cq.cx/sketchflat.pl">https://cq.cx/sketchflat.pl</a></p>
<p style="padding-left: 60px;"><a href="https://cq.cx/sketchflat-tutorial.p">https://cq.cx/sketchflat-tutorial.p</a>l</p>
<p style="padding-left: 90px;"><a href="/downloads/sketchflat-internals.pdf">sketchflat-internals.pdf</a></p>
<h1>Design</h1>
<h4>Math</h4>
<p>利用基因演算法解決機械設計問題:</p>
<p style="padding-left: 30px;">Length = 20</p>
<p style="padding-left: 30px;">平面五連桿 Plotter 設計目標是針對一組 Length cm×Length cm 的繪圖區域，尋找並最佳化五連桿機構中的三個核心設計變數：連桿 L1、連桿 L2，以及底部距離 distance。最終目的是在確保機構穩定運行的前提下，找到能使連桿尺寸最小化（即材料成本與運動慣性最低）的設計。<br/><br/>一、幾何參數設定<br/><br/>    馬達間距 (LENGTH): 兩側連桿（L1 和 L4）的固定轉軸中心必須保持 Length cm 的水平間距。<br/><br/>    繪圖區域 (W×H): 機構必須能覆蓋一個 Length cm 寬度 (W) 和 Length cm 高度 (H) 的完整矩形區域。<br/><br/>    對稱性要求: 機構必須保持對稱，即 L1=L4 且 L2=L3。<br/><br/>二、最小化優化目標 (Objective)<br/><br/>設計應追求連桿總尺寸的最小化。優化目標 J 定義為：<br/>最小化 J=1.0⋅L1+1.0⋅L2+0.5⋅distance<br/><br/>（此權重分配旨在優先最小化連桿長度 L1 和 L2，同時適度控制機構的底部高度 distance。）<br/><br/>三、運動學與工程約束 (Constraints)<br/><br/>設計結果必須嚴格滿足以下三個工程約束，以確保筆尖 C 點在整個繪圖區域內不會遇到死點或不可達的情況。<br/><br/>1. 可達性與外側奇異點迴避 (L1+L2 約束)<br/><br/>連桿 L1 與 L2 的長度總和必須大於機構在繪圖區域最遠點（即 X=Length,Y=distance+Length）處所需的最大距離 Dmax。<br/><br/>這項約束保證了筆尖在最遠處不會發生連桿 L1 和 L2 完全伸直共線（外側奇異點，即 A,B,C 共線）導致的鎖死。<br/><br/>2. 繪圖區域穩定性 (內側奇異點迴避)<br/><br/>連桿 L2 的兩倍長度 (2⋅L2) 必須大於筆尖 C 點在整個 Length cm×Length cm 繪圖區域內時，點 B 到點 D 之間的最大距離 Max(DBD)Area。<br/><br/>更重要的是，為了考慮實際製造公差和控制誤差，必須強制加入 1.0 cm 的安全裕度 (Δ)：<br/>2⋅L2&gt;Max(DBD)Area+1.0 cm<br/><br/>這項約束保證了筆尖在任何位置都不會發生連桿 L2 和 L3 完全伸直共線（內側奇異點，即 B,C,D 共線）導致的控制失效。<br/><br/>3. 轉軸方向約束 (Y 座標約束)<br/><br/>在求解逆運動學時，連桿 L1 和 L4 的擺動點 B 點和 D 點的垂直坐標 (YB 和 YD) 必須始終大於或等於零。<br/><br/>這確保了機構在整個工作過程中始終處於轉軸上方（上搖桿解）的穩定配置，防止機構翻轉至下方區域。</p>
<p style="padding-left: 30px;"><a href="/downloads/redesign_ga1.py">redesign_ga1.py</a></p>
<p style="padding-left: 30px;"><a href="/downloads/redesign_ga1.slvs">redesign_ga1.slvs</a></p>
<p style="padding-left: 30px;">【基因演算法最終最小化尺寸設計結果】<br/>找到**滿足約束且最小化尺寸**的設計（總尺寸 J ≈ 59.44 cm）:<br/>L1 (Link 1 &amp; 4) = 21.79 cm<br/>L2 (Link 2 &amp; 3) = 26.70 cm<br/>Distance (Y-bottom) = 21.89 cm<br/><br/>--- 最終設計驗證 ---<br/>1. 最遠點奇異點約束 (L1+L2 &gt; D_max): 48.50 &gt; 46.42 (滿足)<br/>2. 繪圖區域穩定性 (2*L2 &gt; Max(D_BD) + 1.0cm):<br/>   2*L2 = 53.40 cm<br/>   Max(D_BD) + 1.0 cm = 51.60 + 1.00 = 52.60 cm<br/>   **裕度滿足 (2*L2 僅略大於所需值，實現最小化)**<br/>3. Y 座標約束 (Y_B, Y_D &gt;= 0): 在逆運動學中已確保 (滿足)</p>
<hr/>
<p style="padding-left: 30px;">最小尺寸設計如下:</p>
<p style="padding-left: 30px;">【基因演算法最終最小化尺寸設計結果】<br/>找到**滿足約束且最小化尺寸**的設計（總尺寸 J ≈ 54.97 cm）:<br/>L1 (Link 1 &amp; 4) = 20.00 cm<br/>L2 (Link 2 &amp; 3) = 25.44 cm<br/>Distance (Y-bottom) = 19.04 cm<br/><br/>--- 最終設計驗證 ---<br/>1. 最遠點奇異點約束 (L1+L2 &gt; D_max): 45.45 &gt; 43.87 (滿足)<br/>2. 繪圖區域穩定性 (2*L2 &gt; Max(D_BD) + 1.0cm):<br/>   2*L2 = 50.89 cm<br/>   Max(D_BD) + 1.0 cm = 49.63 + 1.00 = 50.63 cm<br/>   **裕度滿足 (2*L2 僅略大於所需值，實現最小化)**<br/>3. Y 座標約束 (Y_B, Y_D &gt;= 0): 在逆運動學中已確保 (滿足)</p>
<hr/>
<p>利用 Python + Sympy 解數學相關題目:</p>
<p style="padding-left: 30px;"><a href="/downloads/taming math and physics using sympy.pdf">taming math and physics using sympy.pdf</a></p>
<p style="padding-left: 30px;"><a href="/downloads/sympy_documentation.pdf">sympy_documentation.pdf</a></p>
<h4>Simulation</h4>
<p style="padding-left: 30px;"><a href="/downloads/modeling and simulation in python.pdf">modeling and simulation in python.pdf</a></p>
<p style="padding-left: 30px;"><a href="/downloads/bond_graph_modeling.pdf">bond_graph_modeling.pdf</a></p>
<h4>Inverse Kinematics:</h4>
<p style="padding-left: 30px;"><a href="/downloads/inverse_kinematics_solution_of_a_robotic_manipulator_using_python_(two_link).pdf">inverse_kinematics_solution_of_a_robotic_manipulator_using_python_(two_link).pdf</a></p>
<p style="padding-left: 30px;"><a href="/downloads/inverse_kinematic_analysis_of_robot_manipulators(dissertation_2015).pdf">inverse_kinematic_analysis_of_robot_manipulators(dissertation_2015).pdf</a></p>
<h4>Mechanical Advantage Analysis:</h4>
<p style="padding-left: 30px;"><a href="/downloads/mechanical_advantage_analysis.pdf">/downloads/mechanical_advantage_analysis.pdf</a></p>
<h4>Webots:</h4>
<p style="padding-left: 30px;"><a href="/downloads/Simulation_of_a_Mobile_Manipulator_on_Webots.pdf">Simulation_of_a_Mobile_Manipulator_on_Webots.pdf</a></p><h1>Plotter</h1>
<p>設計要求:</p>
<p style="padding-left: 30px;">使用平面五連桿設計一套能夠在 <span style="background-color: #ffff99;">20cm x 20cm</span> 範圍中進行繪圖的畫圖機</p>
<p style="padding-left: 30px;">驅動: NEMA 17 步進馬達或 STS3215 系列伺服馬達</p>
<p>首先查詢 NEMA 17 步進馬達與STS3215 系列伺服馬達的規格尺寸。</p>
<p>17 NE2: 42.3mmx42.3mmx34mm (from <a href="https://www.sumfu.com/step/nema17">https://www.sumfu.com/step/nema17</a>)</p>
<p>STS3215: 45.23mmx24.73mmx29mm (from <a href="https://www.feetechrc.com/74v-19-kgcm-plastic-case-metal-tooth-magnetic-code-double-axis-ttl-series-steering-gear.html">FeeTech</a>)</p>
<p>平面五連桿 plotter 自由度如何計算?</p>
<p style="padding-left: 30px;">計算「平面五連桿機構（Five-bar linkage）」的自由度（Degrees of Freedom, DOF）可以使用「Gruebler-Kutzbach 方程式」來處理。</p>
<p style="padding-left: 30px;">平面機構的自由度 = 3(包含地面的構件數 - 1) - 2(有一個自由度的接頭數) - 有兩個自由度的接頭數</p>
<p style="padding-left: 30px;">因此平面五連桿的自由度 = 3(5-1) - 2(5) - 0 = 2，因此設計中的 Plotter 有兩個自由度。</p>
<p>以下使用基因演算法進行尺寸設計:</p>
<p>五連桿機構設計最佳化：最小化連桿尺寸<br/><br/>本設計的目標是針對一組 20 cm × 20 cm 的繪圖區域，尋找並最佳化三個核心設計變數：連桿 L1、連桿 L2，以及底部距離 distance。最終目的是在確保機構穩定運行的前提下，找到能使連桿尺寸最小化（即材料成本與運動慣性最低）的設計。<br/><br/>一、幾何參數設定<br/><br/>A. 待最佳化設計變數：<br/>1. L1：主連桿/驅動連桿長度（L1 = L4）。<br/>2. L2：副連桿長度（L2 = L3）。<br/>3. distance：機構底部距離（定義馬達中心連線到繪圖區域底邊的垂直距離）。<br/><br/>B. 固定參數：<br/>1. 馬達間距 (LENGTH)：兩側連桿（L1 和 L4）的固定轉軸中心必須保持 20 cm 的水平間距。<br/>2. 繪圖區域 (W×H)：機構必須能覆蓋一個 20 cm 寬度和 20 cm 高度的完整矩形區域。<br/>3. 對稱性要求：機構必須保持對稱，即 L1=L4 且 L2=L3。<br/><br/>二、最小化優化目標 (Objective)</p>
<p style="padding-left: 30px;">設計應追求連桿總尺寸的最小化。優化目標 J 定義為：</p>
<p style="padding-left: 30px;">最小化 J = 1.0 * L1 + 1.0 * L2 + 0.5 * distance</p>
<p style="padding-left: 30px;">（此權重分配旨在優先最小化連桿長度 L1 和 L2，同時適度控制機構的底部高度 distance。）</p>
<p>三、運動學與工程約束 (Constraints)</p>
<p>設計結果必須嚴格滿足以下三個工程約束，以確保筆尖 C 點在整個繪圖區域內不會遇到死點或不可達的情況。<br/><br/>C1. 可達性與外側奇異點迴避 (L1+L2 約束)</p>
<p style="padding-left: 30px;">連桿 L1 與 L2 的長度總和必須大於機構在繪圖區域最遠點所需的最大距離 Dmax。</p>
<p style="padding-left: 30px;">目的：保證筆尖在最遠處不會發生連桿 L1 和 L2 完全伸直共線（外側奇異點）導致的鎖死。<br/>約束式：L1 + L2 &gt; Dmax</p>
<p>C2. 繪圖區域穩定性與內側奇異點迴避</p>
<p style="padding-left: 30px;">連桿 L2 的兩倍長度 (2 * L2) 必須大於筆尖 C 點在整個 20 cm × 20 cm 繪圖區域內時，點 B 到點 D 之間的最大距離 Max(DBD)Area。<br/><br/>安全裕度：必須強制加入 1.0 cm 的安全裕度 (Δ)。<br/>目的：保證筆尖在任何位置都不會發生連桿 L2 和 L3 完全伸直共線（內側奇異點）導致的控制失效。<br/>約束式：2 * L2 &gt; Max(DBD)Area + 1.0 cm</p>
<p>C3. 轉軸方向約束 (Y 座標約束)</p>
<p style="padding-left: 30px;">在求解逆運動學時，連桿 L1 和 L4 的擺動點 B 點和 D 點的垂直坐標 (YB 和 YD) 必須始終大於或等於零。</p>
<p style="padding-left: 30px;">目的：確保機構在整個工作過程中始終處於轉軸上方（上搖桿解）的穩定配置，防止機構翻轉至下方區域。</p>
<p style="padding-left: 30px;">約束式：YB &gt;= 0 且 YD &gt;= 0</p>
<p><a href="/downloads/redesign_ga1.py">redesign_ga1.py</a></p>
<p>選用下列設計:</p>
<p style="padding-left: 30px;">A 點座標 (0, 0) 為 5-bar planar plotter 的左邊馬達位置, 其轉動角度以逆時針為正, 轉角設為 t1, 且從其右邊的水平線算起<br/>E 點座標 (20, 0) 為右邊馬達位置, 其轉動角度也是以逆時針為正, 轉角設為 t2, 也是從其右邊的水平線算起<br/>AB 為 link1 長度為 20, BC 為 link2 長度為 27, CD 為 link3 長度為 27, DE 為 link4 長度為 20, C 點為 plotter 擺放位置<br/>請利用數值方法推導 def t1(cx, cy) 以及 t2(cx, cy), 其中 cx 為 plotter C 點的 x 座標, 而 cy 則為 plotter C點的 y 座標</p>
<hr/>
<p><a href="/downloads/redesign.slvs">redesign.slvs</a></p>
<p><a href="/downloads/redesign.py">redesign.py</a></p>
<p><a href="/downloads/verify_20_40.py">verify_20_40.py</a></p>
<p><a href="/downloads/redesign.7z">redesign.7z</a></p>
<p><a href="/downloads/redesign_simulation.py">redesign_simulation.py</a></p>
<p><a href="/downloads/plotter_redesign.7z">plotter_redesign.7z</a> (含初步 Webots 場景)</p>
<p>修正起始角度的 Webots 場景: <a href="/downloads/plotter_redesign_w6.7z">plotter_redesign_w6.7z</a></p>
<p>利用影像辨識導引繪圖: <a href="/downloads/plotter_redesign_w7.7z">plotter_redesign_w7.7z</a></p>
<p>Prompt:</p>
<p style="padding-left: 30px;">A 點座標 (0, 0) 為 5-bar planar plotter 的左邊馬達位置, 其轉動角度以逆時針為正, 轉角設為 t1, 且從其右邊的水平線算起<br/>E 點座標 (0.2, 0) 為右邊馬達位置, 其轉動角度也是以逆時針為正, 轉角設為 t2, 也是從其右邊的水平線算起<br/>AB 為 link1 長度為 0.2, BC 為 link2 長度為 027, CD 為 link3 長度為 0.27, DE 為 link4 長度為 0.2, C 點為 plotter 擺放位置<br/>請利用 sympy 方法推導 def t1(cx, cy) 以及 t2(cx, cy), 其中 cx 為 plotter C 點的 x 座標, 而 cy 則為 plotter C點的 y 座標<br/><br/>最後結果請給出四種 solutions 的 python function 格式</p>
<p><img caption="false" height="272" src="/images/redesign1.png" width="300"/></p>
<p><img alt="" height="282" src="/images/redesign2.png" width="300"/></p>
<p><img alt="" height="225" src="/images/5bar_animation.gif" width="300"/></p>
<p><img alt="" height="287" src="/images/redesign_plotter.png" width="300"/></p>
<p><img alt="" height="271" src="/images/plotter_redesign_draw_circle.gif" width="300"/></p>
<p><img alt="" height="271" src="/images/plotter_redesign_draw_apple.gif" width="300"/></p>
<p>
<script src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
</p><h2>自由度</h2>
<p>平面機構的自由度推導:<br/><br/>要解釋 <a href="https://en.wikipedia.org/wiki/Chebychev%E2%80%93Gr%C3%BCbler%E2%80%93Kutzbach_criterion">Grübler 公式</a>（或稱 Kutzbach 公式）如何推導出來，需要從平面機構的運動學基本原理出發，逐步分析構件、自由度和約束的關係。以下是 Grübler 公式的推導過程，針對平面五連桿機構的自由度計算：<br/><br/>Grübler 公式</p>
<p>平面機構的自由度公式為：</p>
<p>\[<br/>DOF = 3(N - 1) - 2J_1 - J_2<br/>\]</p>
<p>其中：</p>
<p>\(DOF\)：機構的自由度。<br/>\(N\)：構件數（包括機架）。<br/>\(J_1\)：一自由度關節數（例如轉動軸或滑動軸）。<br/>\(J_2\)：二自由度關節數。<br/><br/>推導過程</p>
<p>推導 Grübler 公式的核心是計算機構中所有構件的總自由度，然後減去關節施加的約束，得到淨自由度。<br/><br/>一、單一構件的自由度</p>
<p>在平面運動中，每個獨立的構件（不與其他構件連接）有以下自由度：<br/>兩個平移自由度（沿 x 和 y 軸移動）。<br/>一個旋轉自由度（繞 z 軸旋轉，平面運動不考慮其他旋轉）。<br/>因此，每個構件的自由度為 3。<br/><br/>對於一個機構有 \(N\) 個構件（包括機架），總自由度為：</p>
<p>\[<br/>3N<br/>\]<br/><br/>二、固定機架的影響</p>
<p>機構通常有一個固定的構件（機架），其自由度完全被約束（即自由度為 0）。為了計算運動構件的自由度，我們從總構件數中減去機架：</p>
<p>機架數量為 1，剩餘的運動構件數為 \(N - 1\)。<br/>但是，為了統一計算，我們先考慮所有構件的自由度，然後通過約束來減去自由度。<br/><br/>三、關節的約束</p>
<p>關節（joint）限制了構件之間的相對運動，每個關節會減少一定的自由度：</p>
<p>單一自由度關節（例如轉動副或滑動副）：這種關節允許一個自由度（例如只允許旋轉或只允許滑動），因此約束了 2 個自由度（因為每個構件原本有 3 個自由度，關節限制了其中 2 個）。</p>
<p style="padding-left: 30px;">每個一自由度關節的約束數：\(3 - 1 = 2\)。</p>
<p style="padding-left: 30px;">如果有 \(J_1\) 個一自由度關節，總約束為：\(2J_1\)。</p>
<p>兩個自由度關節（例如平面關節，允許兩個平移或一個平移加一個旋轉）：這種關節只約束 1 個自由度。</p>
<p style="padding-left: 30px;">每個二自由度關節的約束數：\(3 - 2 = 1\)。</p>
<p style="padding-left: 30px;">如果有 \(J_2\) 個二自由度關節，總約束為：\(J_2\)。</p>
<p>四、總自由度計算</p>
<p>將所有構件的自由度減去關節的約束，得到機構的總自由度：</p>
<p>\[<br/>DOF = 3N - (2J_1 + J_2)<br/>\]<br/><br/>五、考慮機架的固定</p>
<p>機架作為一個構件，其自由度被完全約束（即 3 個自由度被移除）。因此，我們需要考慮機架的影響：<br/>機架固定相當於減去 1 個構件的自由度，即減去 \(3 \cdot 1 = 3\)。<br/>於是，公式調整為僅考慮運動構件的自由度：</p>
<p>\[<br/>DOF = 3(N - 1) - (2J_1 + J_2)<br/>\]</p>
<p>這就是 Grübler 公式的最終形式。<br/><br/>六、為什麼要減去機架的自由度？</p>
<p>機架固定後，其 3 個自由度（2 個平移 + 1 個旋轉）被約束。<br/>這相當於從總自由度 \(3N\) 中減去機架的 \(3\)，因此使用 \(3(N - 1)\) 來表示運動構件的自由度。<br/><br/>應用到五連桿機構</p>
<p>對於平面五連桿機構：</p>
<p>\(N = 5\)（4 個運動連桿 + 1 個機架）。<br/>\(J_1 = 5\)（5 個轉動副）。<br/>\(J_2 = 0\)（無二自由度關節）。<br/><br/>代入公式：</p>
<p>\[<br/>DOF = 3(5 - 1) - 2 \cdot 5 - 0 = 3 \cdot 4 - 10 = 12 - 10 = 2<br/>\]</p>
<p>自由度為 2，符合五連桿機構的特性。<br/><br/>推導的關鍵假設</p>
<p>一、平面運動：公式假設機構在二維平面內運動，每個構件有 3 個自由度。<br/>二、無冗餘約束：公式假設關節的約束是獨立的。如果機構有冗餘約束（例如平行四邊形結構），自由度可能需要進一步分析。<br/>三、關節類型：公式適用於常見的轉動對、滑動對等，若有特殊關節，需重新計算約束。<br/><br/>特殊情況的考慮</p>
<p>如果機構有冗餘約束（例如某些連桿的運動被重複限制），Grübler 公式可能給出不正確的自由度（例如負值或零），這表示機構可能過約束或需要特殊分析。</p>
<p>對於五連桿機構，若結構為閉環且無冗餘約束，自由度通常為 2，這與實際應用（如繪圖機或機械手臂）一致。</p>
<p>
<script src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
</p>
<h2>AI_plotter</h2>
<p><img alt="" height="259" src="/images/plotter_dimension_design.png" width="300"/></p>
<p>已知一個平面五連桿繪圖機購得兩個馬達的中心座標位於 (0,0), (200,0), 四根連桿長度皆為 160mm, 若 plotter 繪圖的座標點為 (x,y), (0,0) 位置上的馬達其轉角從正向 X 軸起算, 以逆時針方向為正, 其轉動角度為 t1, 而(200,0) 位置上的馬達其轉角也是從正向 X 軸起算, 也是以逆時針方向為正, 其轉動角度為 t2, 請利用 Python sympy 推導出以 x, y 為輸入變數, 求四組 t1 與 t2 作為輸出的逆向運動方程式。</p>
<p><a href="/downloads/plotter_sympy_inverse_kinematics.py">plotter_sympy_inverse_kinematics.py</a></p>
<p><a href="https://cad.onshape.com/documents/9ebaa0fe12e0330fda26ad1a/w/7f1387b419b76633fa18bb67/e/0f3404b1684ff733f4127c25?renderMode=0&amp;uiState=68d292d7dfd536c40bf38d8d">Plotter in Onshape</a></p>
<p><img caption="false" height="233" src="/images/plotter_in_onshape.png" width="300"/></p>
<p>link1 tip center: -24.436, 158.123, 9 (模型放大兩倍，並轉為 m (-0.048872, 0.316246))<br/>pen center: 96.762, 262.578, -3 (模型放大兩倍，並轉為 m，(0.193524, 0.525156))<br/>link3 tip center: 218.635, 158.911, 15 (模型放大兩倍，並轉為 m，(0.43727, 0.317822))<br/>right motor center: 200, 0, 15 (模型放大兩倍，並轉為 m，(0.4, 0))<br/>left motor center: 0,0,0</p>
<p>Webots 場景檔案:</p>
<p style="padding-left: 30px;"><a href="/downloads/plotter_onshape_w3.7z">plotter_onshape_w3.7z</a> (僅轉入馬達基座與左側 link1)</p>
<p style="padding-left: 30px;"><a href="/downloads/plotter_onshape_w4.7z">plotter_onshape_w4.7z</a> (僅轉入馬達基座、左側link1 與 link2)</p>
<p>採 matplotlib 模擬四種掃掠 20cmx20cm 正方形邊長的逆向運動學 Solutions:</p>
<p><a href="/downloads/cad_demo_sym_formulation.py">cad_demo_sym_formulation.py</a></p>
<p><a href="/downloads/cad_demo_check_sym_sol.py">cad_demo_check_sym_sol.py</a></p>
<p>Python math 格式:</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">def t1_sol1(x, y): return 2 * cmath.atan((320*y - cmath.sqrt(-x**4 - 2*x**2*y**2 + 102400*x**2 - y**4 + 102400*y**2)) / (x**2 + 320*x + y**2))
def t2_sol1(x, y): return 2 * cmath.atan((320*y + cmath.sqrt(-x**4 + 800*x**3 - 2*x**2*y**2 - 137600*x**2 + 800*x*y**2 - 8960000*x - y**4 + 22400*y**2 + 2496000000)) / (x**2 - 720*x + y**2 + 104000))

# Solution 2:
def t1_sol2(x, y): return 2 * cmath.atan((320*y - cmath.sqrt(-x**4 - 2*x**2*y**2 + 102400*x**2 - y**4 + 102400*y**2)) / (x**2 + 320*x + y**2))
def t2_sol2(x, y): return 2 * cmath.atan((320*y - cmath.sqrt(-x**4 + 800*x**3 - 2*x**2*y**2 - 137600*x**2 + 800*x*y**2 - 8960000*x - y**4 + 22400*y**2 + 2496000000)) / (x**2 - 720*x + y**2 + 104000))

# Solution 3:
def t1_sol3(x, y): return 2 * cmath.atan((320*y + cmath.sqrt(-x**4 - 2*x**2*y**2 + 102400*x**2 - y**4 + 102400*y**2)) / (x**2 + 320*x + y**2))
def t2_sol3(x, y): return 2 * cmath.atan((320*y + cmath.sqrt(-x**4 + 800*x**3 - 2*x**2*y**2 - 137600*x**2 + 800*x*y**2 - 8960000*x - y**4 + 22400*y**2 + 2496000000)) / (x**2 - 720*x + y**2 + 104000))

# Solution 4:
def t1_sol4(x, y): return 2 * cmath.atan((320*y + cmath.sqrt(-x**4 - 2*x**2*y**2 + 102400*x**2 - y**4 + 102400*y**2)) / (x**2 + 320*x + y**2))
def t2_sol4(x, y): return 2 * cmath.atan((320*y - cmath.sqrt(-x**4 + 800*x**3 - 2*x**2*y**2 - 137600*x**2 + 800*x*y**2 - 8960000*x - y**4 + 22400*y**2 + 2496000000)) / (x**2 - 720*x + y**2 + 104000))</pre>
<p><img alt="" height="400" src="/images/cad_demo_sym_formulation_result.gif" width="400"/></p>
<p>mathjax 格式:</p>
<p>JSolution 1 (同上列 math 格式 Solution 2):<br/><br/>\[<br/>t_{1} = 2 \operatorname{atan}{\left(\frac{320 y - \sqrt{- x^{4} - 2 x^{2} y^{2} + 102400 x^{2} - y^{4} + 102400 y^{2}}}{x^{2} + 320 x + y^{2}} \right)}<br/>\]<br/><br/>\[<br/>t_{2} = 2 \operatorname{atan}{\left(\frac{320 y - \sqrt{- x^{4} + 800 x^{3} - 2 x^{2} y^{2} - 137600 x^{2} + 800 x y^{2} - 8960000 x - y^{4} + 22400 y^{2} + 2496000000}}{x^{2} - 720 x + y^{2} + 104000} \right)}<br/>\]<br/><br/>JSolution 2 <span>(同上列 math 格式 Solution 1)</span>:<br/><br/>\[<br/>t_{1} = 2 \operatorname{atan}{\left(\frac{320 y - \sqrt{- x^{4} - 2 x^{2} y^{2} + 102400 x^{2} - y^{4} + 102400 y^{2}}}{x^{2} + 320 x + y^{2}} \right)}<br/>\]<br/><br/>\[<br/>t_{2} = 2 \operatorname{atan}{\left(\frac{320 y + \sqrt{- x^{4} + 800 x^{3} - 2 x^{2} y^{2} - 137600 x^{2} + 800 x y^{2} - 8960000 x - y^{4} + 22400 y^{2} + 2496000000}}{x^{2} - 720 x + y^{2} + 104000} \right)}<br/>\]<br/><br/>JSolution 3 <span>(同上列 math 格式 Solution 4)</span>:<br/><br/>\[<br/>t_{1} = 2 \operatorname{atan}{\left(\frac{320 y + \sqrt{- x^{4} - 2 x^{2} y^{2} + 102400 x^{2} - y^{4} + 102400 y^{2}}}{x^{2} + 320 x + y^{2}} \right)}<br/>\]<br/><br/>\[<br/>t_{2} = 2 \operatorname{atan}{\left(\frac{320 y - \sqrt{- x^{4} + 800 x^{3} - 2 x^{2} y^{2} - 137600 x^{2} + 800 x y^{2} - 8960000 x - y^{4} + 22400 y^{2} + 2496000000}}{x^{2} - 720 x + y^{2} + 104000} \right)}<br/>\]<br/><br/>JSolution 4 <span>(同上列 math 格式 Solution 3)</span><span>:</span>:<br/><br/>\[<br/>t_{1} = 2 \operatorname{atan}{\left(\frac{320 y + \sqrt{- x^{4} - 2 x^{2} y^{2} + 102400 x^{2} - y^{4} + 102400 y^{2}}}{x^{2} + 320 x + y^{2}} \right)}<br/>\]<br/><br/>\[<br/>t_{2} = 2 \operatorname{atan}{\left(\frac{320 y + \sqrt{- x^{4} + 800 x^{3} - 2 x^{2} y^{2} - 137600 x^{2} + 800 x y^{2} - 8960000 x - y^{4} + 22400 y^{2} + 2496000000}}{x^{2} - 720 x + y^{2} + 104000} \right)}<br/>\]</p>
<p>上列符號式求解(Symbolic Formulation)與圖形法求解進行比較:</p>
<p style="padding-left: 30px;">Plotter 到達點 (200, 230) 時的 t1 與 t2 角度（degree）:<br/><br/>JSolution 3 <span>(同上列 math 格式 Solution 4)</span>:</p>
<p style="padding-left: 30px;">t1 = 66.72°</p>
<p style="padding-left: 30px;">t2 = 45.95°</p>
<p>
<script src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
</p>
<h2>P_onshape</h2>
<p><img caption="false" height="234" src="/images/plotter_in_onshape.png" width="300"/></p>
<p></p>
<p><a href="/downloads/plotter_dimension_design_2.slvs">plotter_dimension_design_2.slvs</a></p>
<p><a href="/downloads/webots_plotter_sympy.py">webots_plotter_sympy.py</a></p>
<p><a href="/downloads/webots_verification.py">webots_verification.py</a></p>
<p><img alt="" height="400" src="/images/webots_plotter_sympy.gif" width="400"/></p>
<pre class="brush:html;auto-links:false;toolbar:false" contenteditable="false">import cmath
import math

# Solution 3:
def t1_sol3(x, y):
    rad = 2.0 * cmath.atan(
        (1280.0 * y + cmath.sqrt(
            -4000000.0 * x**4
            - 3200000.0 * x**3
            - 8000000.0 * x**2 * y**2
            - 4000000.0 * x**2 * y
            + 178400.0 * x**2
            - 3200000.0 * x * y**2
            - 1600000.0 * x * y
            + 327360.0 * x
            - 4000000.0 * y**4
            - 4000000.0 * y**3
            - 181600.0 * y**2
            + 409200.0 * y
            + 125911.0
        ) + 320.0) / (
            2000.0 * x**2 + 2080.0 * x + 2000.0 * y**2 + 1000.0 * y + 461.0
        )
    )
    return math.degrees(rad.real)

def t2_sol3(x, y):
    rad = 2.0 * cmath.atan(
        (1280.0 * y - cmath.sqrt(
            -4000000.0 * x**4
            + 3200000.0 * x**3
            - 8000000.0 * x**2 * y**2
            - 4000000.0 * x**2 * y
            + 178400.0 * x**2
            + 3200000.0 * x * y**2
            + 1600000.0 * x * y
            - 327360.0 * x
            - 4000000.0 * y**4
            - 4000000.0 * y**3
            - 181600.0 * y**2
            + 409200.0 * y
            + 125911.0
        ) + 320.0) / (
            2000.0 * x**2 + 480.0 * x + 2000.0 * y**2 + 1000.0 * y - 51.0
        )
    )
    return math.degrees(rad.real)

# 測試
print(t1_sol3(0.2, 0.185), t2_sol3(0.2, 0.185))
</pre>
<p><span>利用右上方最遠的繪圖點進行上列 Solution 3 方程式查驗:</span></p>
<p><span><a href="/downloads/plotter_dimension_design_2.slvs">plotter_dimension_design_2.slvs</a></span></p>
<p><span><a href="/downloads/webots_ik_right_top_corner.py">webots_ik_right_top_corner.py</a> 執行控制後機構模擬如下，之後可以修改此一程式透過 t1_ik(x, y) 與 t2_ik(x, y) 求得 plotter 繪圖點座標設置為繪圖區各點時的 t1 與 t2 馬達旋轉角度，其量測參考線為馬達右側的水平線作為起點，且逆時針方向為正。</span></p>
<p><span>plotter 零組件轉檔、 Webots 場景與控制器程式: <a href="/downloads/plotter_onshape_w5.7z">plotter_onshape_w5.7z</a>，請各組根據此參考資料，嘗試讓 plotter 可以在繪圖區 (目前為 0.4mx0.4m) 繪製任何線架構圖形。隨後可進一步加入提筆機構，並考量若進行實作原型時，該如何從 Webcam 取得的相片圖檔，轉換為可讓 plotter 繪製的線段圖形。</span></p>
<p><span><img alt="" height="297" src="/images/webots_ik_right_top_corner.py.png" width="300"/></span></p>
<hr/>
<p><span><a href="/downloads/webots_check_sol3.py">webots_check_sol3.py</a></span></p>
<p><span>pythonw.exe -u "webots_check_sol3.py"<br/>--- Solution 3 at P(0.2, 0.185) ---<br/>t1 (Radians): (1.221335238965607+0j)<br/>t2 (Radians): (0.7473365120313953+0j)<br/>------------------------------------------<br/>t1 (Degrees): 69.9774 degrees<br/>t2 (Degrees): 42.8192 degrees</span></p>
<p><span><img caption="false" height="254" src="/images/webots_check_sol3.png" width="300"/></span></p>
<h2>P_webots</h2>
<p>Webots 場景中的 hingejoint 是以機構的初始角度作為 0 度。</p>
<p>轉入 Webots 的 <a href="https://cad.onshape.com/documents/9ebaa0fe12e0330fda26ad1a/w/7f1387b419b76633fa18bb67/e/0f3404b1684ff733f4127c25?renderMode=0&amp;uiState=68d292d7dfd536c40bf38d8d">Plotter in Onshape</a> 其機構初始設置為:</p>
<p><img alt="" height="300" src="/images/webots_plotter_initial_conf.png" width="300"/></p>
<p>若以逆時針轉角為正， t1 必須反轉 8.78 度才能達到垂直的位置，而 t2 則必須正轉 6.69 度才能達到垂直的位置。</p>
<p>若兩個馬達都以水平線作為 0 度，則處了考慮從垂直角度位置，還必須逆轉 90 度才能到達水平的零點轉角位置。</p>
<p>此一角度座標定義，可以利用 <a href="/downloads/webots_plotter_zero_degree.py">webots_plotter_zero_degree.py</a> 控制程式，讓兩個馬達的轉角設置在水平位置。</p>
<p><img alt="" height="265" src="/images/webots_plotter_zeor_degree.png" width="300"/></p>
<p><a href="/downloads/plotter_onshape_w4.7z">plotter_onshape_w4.7z</a></p>
<hr/>
<p>兩種建立剛體的方法 url 給定 OBJ 或 STL 檔案所在相對位置:</p>
<p style="padding-left: 30px;"><a href="https://cyberbotics.com/doc/reference/solid">Solid</a> - <a href="https://cyberbotics.com/doc/reference/shape">Shape</a> - <a href="https://cyberbotics.com/doc/reference/mesh">Mesh</a> - url</p>
<p style="padding-left: 30px;"><a href="https://cyberbotics.com/doc/reference/cadshape">CadShape</a> - url</p>
<p>利用 boundingObject 界定物件碰撞檢測範圍:</p>
<p style="padding-left: 30px;">boundingObject USE shape</p>
<p><a href="https://cyberbotics.com/doc/reference/solidreference">SolidReference</a> 設定於 link3 端點，且參照 link4_solid，表示第四旋轉軸既位於 link3，同時也必須位於 link4，讓 Webots 透過此一 closed chain 約束條件，於系統方程式運算時，能夠模擬封閉連桿機構的運動。</p>
<p><img alt="" height="253" src="/images/plotter_project_SolidReference.png" width="300"/></p>
<p>從 <a href="https://cad.onshape.com/documents/9ebaa0fe12e0330fda26ad1a/w/7f1387b419b76633fa18bb67/e/0f3404b1684ff733f4127c25?renderMode=0&amp;uiState=68d292d7dfd536c40bf38d8d">Plotter in Onshape</a> 以 <a href="https://en.wikipedia.org/wiki/STL_(file_format)">STL</a> 格式轉出後，利用 <a href="/downloads/plotter_onshape/cad/split_stl_to_obj_scale2_w_mtl.py">split_stl_to_obj_scale2_w_mtl.py</a>，以兩倍原始尺寸分割零件為 <a href="https://en.wikipedia.org/wiki/Wavefront_.obj_file">OBJ</a> 格式後，轉進 Webots 建立第一階段的模擬場景: 僅 link1 轉動: <a href="/downloads/plotter_onshape_link1.7z">plotter_onshape_link1.7z</a></p>
<h2>P_Control</h2>
<p>Arduino <a href="https://wokwi.com/projects/366115111171985409">control two stepper motors</a></p>
<p><a href="https://swf.com.tw/?p=1188">使用Python的pySerial模組進行序列通訊：連接電腦與Arduino和MicroPython</a></p>
<p><a href="https://cyberbotics.com/doc/guide/interfacing-webots-to-third-party-software-with-tcp-ip">Interfacing Webots through TCP/IP</a></p>
<h2>P_BOM</h2>
<p>以下的 5 bar planar plotter 設計尺寸為 cm，希望自行以 3D 列印零件，請針對此機電設計提供詳細的所有零組件 BOM，其中包括規格以及說明採用原因，並且列出在台灣採購的單價:</p>
<p style="padding-left: 30px;">A 點座標 (0, 0) 為 5-bar planar plotter 的左邊馬達位置，其轉動角度以逆時針為正，轉角設為 t1，且從其右邊的水平線算起，E 點座標 (20, 0) 為右邊馬達位置，其轉動角度也是以逆時針為正，轉角設為 t2，也是從其右邊的水平線算起，AB 為 link1 長度為 20，BC 為 link2 長度為 27，CD 為 link3 長度為 27，DE 為 link4 長度為 20，C 點為 plotter 擺放位置。<br/>請利用數值方法推導 def t1(cx, cy) 以及 t2(cx, cy)，其中 cx 為 plotter C 點的 x 座標，而 cy 則為 plotter C點的 y 座標。</p>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">項目	零件名稱       	規格/建議型號                       	數量  	預計單價（TWD）	單項總價（TWD）	採購來源（台灣）                 	採用原因                        
1   	步進馬達       	NEMA 17 (1.8°, 42BYGHW208)        	2     	300            	600            	樂積木、露天拍賣、Maker stores   	廣泛使用於 CNC/3D Printer，具備良好扭力
2   	馬達驅動板     	A4988 / TMC2208                   	2     	75             	150            	樂積木、蝦皮、露天拍賣           	控制步進馬達；TMC 較安靜              
3   	控制板         	Arduino Uno / Mega               	1     	375            	375            	樂積木、蝦皮                     	易用、資源多                      
4   	板材（底座）    	雷射切割壓克力 / 木板（20x30cm）    	1     	150            	150            	DIY材料行                        	承載整個結構                      
5   	3D 列印連桿    	長度 20cm / 27cm（自製）             	4     	40             	160            	自行列印                         	根據連桿尺寸製作，輕巧                 
6   	銀球軸承       	8mm 內徑（608ZZ）                  	6     	25             	150            	蝦皮                             	降低摩擦，增加穩定性                  
7   	M3 螺絲/螺帽組 	M3x20mm、M3x30mm                 	1     	50             	50             	蝦皮                             	組裝連桿與軸承                     
8   	筆夾模組       	3D列印零件 + 彈簧結構                 	1     	20             	20             	自製                             	夾住筆尖，配合 Z 軸上下壓力             
9   	電源模組       	12V 3A DC Adapter                	1     	200            	200            	樂積木 / 淘寶                    	供電給馬達及控制板                   
10  	限位開關       	機械型 Endstop                    	3     	25             	75             	樂積木                           	做原點校準                       

總計									                                1930
</pre>
<p></p><h1>Openduck</h1>
<p><a href="https://github.com/apirrone/Open_Duck_Mini">Open Duck Mini</a> 是一款模組化、開源的雙足仿生機器人平台，專為教育與研究設計，具備高自由度與低成本特性。</p>
<p><img caption="false" height="298" src="/images/openduck_mini.png" width="200"/></p>
<p><a href="https://cad.onshape.com/documents/26c83cdd49510fc094b845a1/w/1f0ebd66fbcba930fc39351f/e/98c9ea7ad6f244e859d1e24a">Openduck in Onshape</a></p>
<p><a href="https://github.com/apirrone/Open_Duck_reference_motion_generator">https://github.com/apirrone/Open_Duck_reference_motion_generator</a> </p>
<p><a href="https://github.com/mdecycu/Open_Duck_Blender">https://github.com/mdecycu/Open_Duck_Blender</a> </p>
<p><a href="/downloads/openduck_frame.7z">openduck_frame.7z</a> (parasolid in NX2312)</p>
<p>Openduck in Solvespace:</p>
<p><img alt="" height="184" src="/images/openduck_in_solvespace.png" width="300"/></p>
<p><img alt="" height="210" src="/images/openduck_in_solvespace2.png" width="300"/></p>
<p><a href="/downloads/openduck_in_solvespace.7z">openduck_in_solvespace.7z</a></p>
<hr/>
<p>Inverse Kinematic Solutions: </p>
<p style="padding-left: 30px;"><a href="https://github.com/rpiRobotics/ik-geo">https://github.com/rpiRobotics/ik-geo</a> </p>
<p style="padding-left: 30px;"><a href="https://pypi.org/project/ik-geo/">https://pypi.org/project/ik-geo/</a> </p>
<p style="padding-left: 30px;"><a href="https://github.com/weigao95/yaik">https://github.com/weigao95/yaik</a> </p>
<p style="padding-left: 30px;"><a href="https://github.com/rpiRobotics/rpi_general_robotics_toolbox_py">https://github.com/rpiRobotics/rpi_general_robotics_toolbox_py</a> </p>
<p><a href="https://www.sciencedirect.com/science/article/pii/S0094114X25000606">IK-Geo: Unified robot inverse kinematics using subproblem decomposition</a></p>
<ol>
<li>IK‑Geo 是一個針對 6 自由度全旋轉關節機器人（6R manipulator） 的逆運動學解法，採用「子問題分解法（subproblem decomposition）」的方式，把整個 IK 問題拆成六種幾何子問題（如圓與點、兩圓之交、圓與平面、圓與球、三圓交、四圓交）來逐步求解。</li>
<li>對於某些特定的機構構型（例如有三個交會或平行軸線的 6R 機構），它能用閉式（closed-form）方式解出所有解，而無需數值搜尋。其他構型則可能退化為對一或兩個關節角做 1D 或 2D 搜索。</li>
<li>作者宣稱對於許多常見工業 6R機器人（例如 UR5 等），IK-Geo 的速度能比 IKFast 快 40 倍以上。</li>
<li>IK-Geo 也具備處理奇異情況的能力（比如在解不存在時提供最小平方近似解或連續近似解）以增加解題穩健性。</li>
<li>實作上，IK-Geo 提供 MATLAB、C++、Rust、Python 等多語言版本，並附有測試範例與效能比較。</li>
<li>IK-Geo 的主要特點是其採用幾何分解，加上部分搜尋混合的策略，以在效率與泛用性之間取得不錯的折衷。</li>
</ol>
<p>其他參考資料: <a href="https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;arnumber=11122599">Automatic Geometric Decomposition for Analytical Inverse Kinematics</a></p>
<hr/>
<p>設計規格：</p>
<ol>
<li>使用 12 顆 <a href="https://www.feetechrc.com/74v-19-kgcm-plastic-case-metal-tooth-magnetic-code-double-axis-ttl-series-steering-gear.html">FeeTech STS3215</a> 伺服馬達（7.4V，19kg·cm 扭矩）+ 2 顆 <a href="https://www.amazon.com/dp/B0FJQZSFMS">Miuzei 9g 輔助伺服</a>，實現 14 個自由度（雙足腿部 10 DOF，頭頸 4 DOF），支援穩定步態、轉向與精確感測定位。</li>
<li>機身採用 3D 列印（PLA 機身硬性結構/TPU 腳底軟性結構），尺寸約 42cm 高，總重約 1.0–1.3kg。</li>
<li>控制單元為 <a href="https://www.taiwaniot.com.tw/product/raspberry-pi-zero-wh/">Raspberry Pi Zero WH</a>，支援 Wi-Fi/Bluetooth 與模組化感測器擴充（如 IMU、攝影機）。電源為 7.4V 2S（2 顆 <a href="https://www.taiwaniot.com.tw/product/panasonic-ncr18650ga-3450mah/">18650 電池</a>），峰值電流 4–7A。提供 <a href="https://cad.onshape.com/documents/64074dfcfa379b37d8a47762/w/3650ab4221e215a4f65eb7fe/e/0505c262d882183a25049d05">CAD</a>、韌體與原始碼，採開放授權，零件公開取得，BOM 總成本約$400 美元。</li>
</ol><h2>O_Analysis</h2>
<p><img alt="" height="263" src="/images/openduck_link_dimension.png" width="300"/></p>
<p>OpenDuck Mini 的單腿結構（5DoF）</p>
<p style="padding-left: 30px;">Hip Yaw（髖部水平旋轉）- link1 長度即馬達旋轉中心至馬達底部的長度 0.03472m</p>
<p style="padding-left: 30px;">Hip Roll（髖部側擺）- link2 長度 0.06234m</p>
<p style="padding-left: 30px;">Hip Pitch（髖部前後擺）- link3 長度 0.07827m</p>
<p style="padding-left: 30px;">Knee Pitch（膝關節）- link4 長度 0.07827m</p>
<p style="padding-left: 30px;">Ankle Pitch（腳踝前後擺）- link5 長度 0.03132m</p>
<p style="padding-left: 30px;">Base -- Hip Yaw (rot_z) -- Hip Roll (rot_y) -- Hip Pitch (rot_x) -- Knee Pitch (rot_x) -- Ankle Pitch (rot_x) -- Foot (end-effector)</p>
<p>使用 <a href="https://github.com/Phylliade/ikpy">ikpy</a> 進行逆運動學運算:</p>
<p style="padding-left: 30px;">導入必要的類別 (Chain, URDFLink, numpy)。</p>
<p style="padding-left: 30px;">定義機器人的幾何結構，創建一個 Chain 對象。</p>
<p style="padding-left: 30px;">定義目標位置或姿態 (target_position 或 target_frame)。</p>
<p style="padding-left: 30px;">呼叫 chain.inverse_kinematics() 即可獲得所需的關節角度。</p>
<p><a href="/downloads/openduck_frame/solvespace/openduck_ikpy1.py">openduck_ikpy1.py</a> (未移除警告) <a href="/downloads/openduck_frame/solvespace/openduck_ikpy2.py">openduck_ikpy2.py</a> (已移除警告)</p>
<p>Inverse Kinematics 程式將末端執行器移動到，以第一旋轉軸中心為座標原點的目標相對位置 [0.05,0.02,−0.15] (米)。</p>
<p>冗餘度： 在這個特定的目標位置下，ikpy 求解器將大多數的工作分配給了 hip_yaw 和 hip_roll 兩個關節，而 hip_pitch、knee_pitch 和 ankle_pitch 三個俯仰角（理論上用來控制腿部彎曲和長度的主關節）都保持在它們的初始位置 0 rad。表示此目標位置僅靠髖關節的平移旋轉就能達到。</p>
<p><a href="https://github.com/Phylliade/ikpy">ikpy</a> 的預設求解器 (基於梯度下降) 傾向於選擇最接近初始位置的解，由於您設置的初始位置都是 0 rad，因此它選擇了俯仰角接近 0 的解。</p>
<p>關節名稱    角度（弧度）    角度（約略）    備註<br/>hip_yaw    0.3805 rad    ≈21.8∘    髖關節偏航角<br/>hip_roll    −0.2837 rad    ≈−16.3∘    髖關節滾轉角<br/>hip_pitch    0.0000 rad    0∘    髖關節俯仰角<br/>knee_pitch    0.0000 rad    0∘    膝關節俯仰角<br/>ankle_pitch    0.0000 rad    0∘    踝關節俯仰角</p>
<hr/>
<p>步態的角色： 步態 (Gait) 是一個動態、有時間序列的運動過程。它定義了 Openduck 如何按順序移動其雙足，其中涉及：</p>
<ol>
<li>足端軌跡 (Foot Trajectory)： 腳尖在空中和地面上移動的路徑（通常是週期性的曲線，如正弦曲線或圓弧）。</li>
<li>相位 (Phase)： 哪一條腿什麼時候在空中 (Swing Phase)，什麼時候在地上 (Stance Phase)。</li>
<li>穩定性 (Stability)： 確保機器人的質心 (Center of Mass, CoM) 始終落在支撐多邊形內（靜態穩定性）或在動態上穩定。</li>
</ol>
<hr/>
<p>一、步態類型（Gait Type）選擇：</p>
<p style="padding-left: 30px;">步態類別：</p>
<p style="padding-left: 30px;">ZMP-based gait（零力矩點）：適合穩定行走</p>
<p style="padding-left: 30px;">CPG（Central Pattern Generator）：模仿生物神經節律</p>
<p style="padding-left: 30px;">步態庫（Gait Library）：預定義步態參數</p>
<p>二、步態參數（Gait Parameters）包括：</p>
<p style="padding-left: 30px;">步長（Step Length）</p>
<p style="padding-left: 30px;">步高（Step Height）</p>
<p style="padding-left: 30px;">步頻（Step Frequency）</p>
<p style="padding-left: 30px;">支撐相時間（Support phase time）</p>
<p style="padding-left: 30px;">擺動相時間（Swing phase time）</p>
<p>三、設定流程：</p>
<p style="padding-left: 30px;">設計足端軌跡（在空間中畫出足的移動路徑）</p>
<p style="padding-left: 60px;">採用拋物線形或貝茲曲線軌跡</p>
<p style="padding-left: 60px;">在某個時間內足端從 A 點擺到 B 點</p>
<p style="padding-left: 30px;">對每個時間點做 IK 求 joint angles</p>
<p style="padding-left: 30px;">依據時間產生 joint command (例如 100Hz 控制迴圈，每 10ms 更新一次關節角度)</p>
<p>步驟:</p>
<p style="padding-left: 30px;">建立單腿的 D-H 參數模型</p>
<p style="padding-left: 30px;">寫出 forward kinematics</p>
<p style="padding-left: 30px;">用 symbolic 解反向運動學（或用數值法）</p>
<p style="padding-left: 30px;">設計簡單的 foot trajectory（比如步高 5cm，步長 10cm）</p>
<p style="padding-left: 30px;">實作 gait scheduler：分成支撐相與擺動相</p>
<p style="padding-left: 30px;">讓雙腿交錯控制（左腳擺動時右腳支撐）</p>
<p>步態規劃:</p>
<p style="padding-left: 30px;"><a href="https://github.com/ami-iit/bipedal-locomotion-framework">https://github.com/ami-iit/bipedal-locomotion-framework</a> </p>
<p style="padding-left: 30px;">若希望 Webots 結合上列 BLF 框架，在 Windows 環境中可以使用 conda 指令安裝:</p>
<p style="padding-left: 30px;">conda install conda-forge::bipedal-locomotion-framework-python</p>
<p style="padding-left: 30px;">提問: Webots 模擬環境如何與 Bipedal Locomotion Framework (BLF, 即 bipedal‑locomotion‑framework) 結合應用?</p>
<p style="padding-left: 30px;">提問: 假如採用 https://github.com/aidudezzz/deepbots 與 webots 對 openduck 進行步態規劃學習, 該如何進行? </p>
<h3>O_Prompts</h3>
<p><a href="https://ikpy.readthedocs.io/en/latest/">https://ikpy.readthedocs.io/en/latest/</a> </p>
<p>針對運用 <a href="https://github.com/Phylliade/ikpy">ikpy</a> 的 <a href="/downloads/openduck_frame/solvespace/openduck_ikpy2.py">openduck_ikpy2.py</a> 進行提問:</p>
<p style="padding-left: 30px;">請詳細說明以下程式的設置原理:(接著貼上 <a href="/downloads/openduck_frame/solvespace/openduck_ikpy2.py">openduck_ikpy2.py</a> 程式碼)</p>
<p style="padding-left: 30px;">第一關節不能動是什麼意思?</p>
<p style="padding-left: 30px;">所以第二關節是繞著 z 軸旋轉? 而且距離第三關節有 0.03472m? 第三關節是繞哪一軸旋轉?</p>
<p style="padding-left: 30px;">請詳細說明一下 URDFLink( name="hip_roll", origin_translation=[0, 0, 0], origin_orientation=[0, 0, 0], rotation=[0, 1, 0] )</p>
<p style="padding-left: 30px;">URDF 有沒有特殊意思?</p>
<p style="padding-left: 30px;">假如採用 <a href="https://github.com/aidudezzz/deepbots、">https://github.com/aidudezzz/deepbots、</a> <a href="https://github.com/Phylliade/ikpy">https://github.com/Phylliade/ikpy</a> 與 webots 對 openduck 進行步態規劃學習，該如何進行? 建議用來進行此類強化學習 (Reinforcement Learning) 的電腦硬體配備為何?</p>
<p style="padding-left: 30px;">RTX 1050 加上 intel Core i7 16GB 用於此類強化學習，配置夠用嗎?</p>
<p style="padding-left: 30px;">對教育界有沒有免費的雲端強化學習資源可以使用?</p>
<p style="padding-left: 30px;">Openduck Webots 機電模型經過 <a href="https://github.com/aidudezzz/deepbots">Deepbots</a>，<a href="https://github.com/Phylliade/ikpy">ikpy</a> 的強化學習之後，得到甚麼結果? 後續該如何應用?</p>
<hr/>
<p>強化學習 (Reinforcement Learning) 訓練後得到的成果，是一個能接受輸入後，取得用來控制機器人動態表現的模型，這個模型包含了機器人如何決策和控制其運動的策略。這些策略通常以特定形式存儲，例如 神經網絡模型、Q 值表或其他適合問題的結構。當使用 <a href="https://github.com/aidudezzz/deepbots">Deepbots</a>、<a href="https://github.com/Phylliade/ikpy">ikpy</a> 程式庫進行機器人步態學習時，將會取得以下結果：<br/><br/>一、訓練後的模型：</p>
<p style="padding-left: 30px;">訓練的核心結果是策略模型，它將告訴機器人如何根據觀察到的狀態（例如機器人當前的位置、速度、加速度等）來決定行動（例如關節角度的控制）。這個模型通常是神經網絡或其他形式的決策函數。模型會學會最佳策略來達到預定目標，並避開障礙物或保持平衡。</p>
<p>二、模型的存儲與提取：</p>
<p style="padding-left: 30px;">在訓練過程中，模型通常會被保存在文件中，這樣可以在後續進行提取並應用到真實世界中。根據所使用的強化學習框架，模型的存儲格式會有所不同。以下是幾種情況：</p>
<p>(1) 神經網絡模型：</p>
<p style="padding-left: 30px;">訓練過程中，將深度神經網絡 (如 DQN、A3C、PPO 等算法) 來學習策略。這些神經網絡的權重 (weights) 和偏置 (bias) 會在訓練過程中不斷更新。</p>
<p style="padding-left: 30px;">訓練完成後，模型會被保存為一個模型檔案，通常以 .h5 (Keras)、.pth (PyTorch) 或 .ckpt (TensorFlow)等格式存儲。</p>
<p>如何提取模型：</p>
<p style="padding-left: 30px;">在 <a href="https://github.com/aidudezzz/deepbots">Deepbots</a> 或 OpenAI Gym 等環境中，訓練後的模型可以使用程式庫所提供的 API 保存：</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">model.save("trained_model.h5")  # Keras
torch.save(model.state_dict(), "trained_model.pth")  # PyTorch
</pre>
<p style="padding-left: 30px;">之後，這些模型可以被加載並應用於新環境或真實世界的機器人：</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">model = keras.models.load_model("trained_model.h5")  # Keras
model.load_state_dict(torch.load("trained_model.pth"))  # PyTorch
</pre>
<p>(2) 策略或 Q 值表：</p>
<p style="padding-left: 30px;">如果使用 Q-learning 的傳統強化學習算法，訓練的結果通常是 Q 值表或策略表，它是機器人對每個可能的狀態-行為對應的期望回報值。</p>
<p style="padding-left: 30px;">這些表格可以保存在 CSV 文件、JSON 文件或其他格式中。它們通常是以狀態-行為對應的 Q 值或策略選擇的行為存儲。</p>
<p>如何提取策略或 Q 值：</p>
<p style="padding-left: 30px;">在 Q-learning 或 SARSA 等算法中，訓練後的 Q 值表可以直接保存：</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">import json
with open("q_table.json", "w") as f:
    json.dump(q_table, f)
</pre>
<p style="padding-left: 30px;">然後可以通過載入 Q 表來進行決策：</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">with open("q_table.json", "r") as f:
    q_table = json.load(f)
</pre>
<p>(3) 策略梯度方法的策略模型：</p>
<p style="padding-left: 30px;">如果使用的是策略梯度方法 (如 A3C、PPO 等)，訓練的結果通常是策略模型，它將從當前狀態生成對應的行為分佈(或確定行為)。</p>
<p style="padding-left: 30px;">這些模型通常是神經網路，用於從環境中觀察的狀態生成行為或動作。</p>
<p>如何提取策略：</p>
<p style="padding-left: 30px;">訓練後，策略模型也可以像其他神經網路一樣保存：</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">model.save("policy_model.h5")  # Keras
</pre>
<p style="padding-left: 30px;">加載策略模型後，當機器人需要執行動作時，可以通過這個模型來選擇對應的行為：</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">policy_model = keras.models.load_model("policy_model.h5")
action = policy_model.predict(current_state)
</pre>
<p>三、 如何在後續應用中使用訓練模型：</p>
<p>(1) 將模型應用到真實世界機器人：</p>
<p style="padding-left: 30px;">在 Webots 中進行訓練後，訓練好的模型可以用來控制真實機器人的行為。這通常需要將模型嵌入到機器人的控制系統中。這可以通過以下步驟實現：</p>
<p style="padding-left: 30px;">步驟1：將訓練好的模型加載到機器人控制程式中 (例如使用 TensorFlow 或 PyTorch 等框架)。</p>
<p style="padding-left: 30px;">步驟2：從機器人的感測器 (如相機、IMU、加速度計等) 獲取當前狀態，並將其傳遞到訓練過的模型中。</p>
<p style="padding-left: 30px;">步驟3：模型根據當前狀態生成對應的控制指令 (例如關節角度、步伐大小等)。</p>
<p style="padding-left: 30px;">步驟4：將控制指令發送到機器人硬體進行執行。</p>
<p>具體例子：</p>
<p style="padding-left: 30px;">假設使用 PPO 算法訓練機器人的行走策略，訓練後的模型可以加載並應用到 Webots 模擬場景中：</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false"># 假設用 Keras 訓練過的 PPO 策略模型
model = keras.models.load_model("ppo_model.h5")

# 獲取當前狀態（例如機器人的位置、速度等）
current_state = get_robot_state()

# 通過模型預測行動
action = model.predict(current_state)

# 發送控制命令到 Webots
apply_action_to_robot(action)
</pre>
<p>(2) 實時控制與微調：</p>
<p style="padding-left: 30px;">訓練後的模型還可以在真實世界運行中進行微調，這可以幫助模型適應現實環境中的細微差異 (例如摩擦、感測器噪聲等)。微調的過程可能涉及到：</p>
<p style="padding-left: 30px;">強化學習的線上學習：機器人在實際環境中執行時，根據結果 (如成功步行距離、穩定性等)進行即時調整。</p>
<p style="padding-left: 30px;">自適應控制：根據真實世界的回饋進行控制策略的更新，也可以基於經驗進行調整。</p>
<p>四、後續應用：</p>
<p style="padding-left: 30px;">訓練後的模型除了用於機器人的即時控制外，還可以應用於以下領域：</p>
<p style="padding-left: 60px;">模擬中進行更多訓練：可以在訓練過程中使用模型生成的數據進行後續的強化學習。</p>
<p style="padding-left: 60px;">跨平台應用：訓練後的模型可以從 Webots 模擬遷移到不同的機器人平臺，如移動平台、機械臂等。</p>
<p style="padding-left: 60px;">步態最佳化：在新環境中可以進行步態最佳化，讓機器人自動適應不同的場地。</p><h2>O_BOM</h2>
<p>請針對自組一隻 <a href="https://github.com/apirrone/Open_Duck_Mini">https://github.com/apirrone/Open_Duck_Mini</a> 所需要的詳細機電零組件 BOM, 其中包括零件名稱，規格，數列，單價，單項總價, 台灣採購來源, 採用原因等欄位, 最後一列再列出整體總價。</p>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">序號	類別		零件名稱		規格 / 型號 / 備註					數量	單價(TWD)	小計(TWD)	採購來源				採用理由
1	控制		Raspberry Pi Zero 2W	1GHz CPU / WiFi / BT / GPIO			1	467		467		樂積木、台灣 Maker 通路	輕巧嵌入式 Linux 控制核心
2	控制		MicroSD 卡		32 GB UHS-I (Class 10)				1	150		150		記憶卡通路				作業系統與資料儲存
3	電源		鋰電池組		2S / 7.4V LiPo, ≥2000mAh				1	300		300		模型電池店、RC通路			機器人主要動力來源
4	電源		保護板 / BMS		過充/過放/過流保護 2S					1	120		120		電子零件店				保護鋰電池安全運作
5	電源		DC-DC 降壓模組		輸入 7.4V → 輸出 5V/3A				1	80		80		樂積木、蝦皮等				Raspberry Pi 電源穩壓
6	驅動器		BAM 關節驅動器		Rhoban BAM mini 或同級（每關節一顆）	12	1200		14400		國外代理（Rhoban）			高整合度，適用於輕型機器人關節
7	感測器		IMU 模組		MPU-9250 / BNO055 等 9軸模組			1	250		250		感測器通路、樂積木			測姿態與角度
8	感測器		電流感測器		INA219 / ACS712 模組					2	80		160		電子零件通路				偵測耗電/異常動作
9	感測器		限位開關		微型機械型，常閉					4	25		100		電子零件行				做歸零 / 原點偵測
10	機構		3D 列印件		PLA（身體）、TPU（腳底）				1	300		300		自列或代印					機構主體、自定義設計
11	機構		軸承			如 5×11×4mm（視設計）				10	30		300		五金行、蝦皮、軸承商			降低轉動摩擦、延長壽命
12	機構		鋼軸 / 鉸軸		Φ3mm / Φ4mm 不鏽鋼或碳鋼軸			6	20		120		模型五金店					關節或連桿軸心用
13	機構		螺絲螺帽		M2~M3 不等規格					1組	50		50		螺絲材料包、蝦皮				結構固定用
14	連接		線材排線		杜邦線 / JST / AWG22-26				1組	100		100		電子材料行				訊號/電源連接
15	選配		OLED 顯示模組		0.96 吋 I2C OLED					1	120		120		模組供應商				狀態顯示/除錯介面
16	選配		無線模組		ESP32 / nRF24L01+ 模組				1	150		150		樂積木、模組商				遠端調試/無線通信
17	外觀		裝飾殼件		3D列印或壓克力蓋板					若干	100		100		自印/壓克力材料行			外觀美化/防塵

總計												-	-		16,317		-
</pre><h2>O_IK</h2>
<p><a href="https://github.com/Phylliade/ikpy">https://github.com/Phylliade/ikpy</a> </p>
<p><a href="https://la.disneyresearch.com/wp-content/uploads/BD_X_paper.pdf">https://la.disneyresearch.com/wp-content/uploads/BD_X_paper.pdf</a> </p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" frameborder="0" height="315" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/7_LW7u-nk6Q?si=7Sne6ywiFFDxFQNx" title="YouTube video player" width="560"></iframe></p>
<p><a href="https://github.com/pollen-robotics/Open_Duck_Blender">https://github.com/pollen-robotics/Open_Duck_Blender</a></p>
<p><a href="https://la.disneyresearch.com/wp-content/uploads/Development-of-a-Bipedal-Robot-that-Walks-Like-an-Animation-Character-Paper.pdf">https://la.disneyresearch.com/wp-content/uploads/Development-of-a-Bipedal-Robot-that-Walks-Like-an-Animation-Character-Paper.pdf</a> </p>
<p><span class="HzN33d" data-huuid="9348372231713830910"><span>5R robot foot inverse kinematics involves calculating the joint angles needed to place a robot's foot in a desired position and orientation, which is a complex problem solved through various methods like analytical solutions, geometric approaches, and computational algorithms.</span><span> </span></span></p>
<p><span class="HzN33d" data-huuid="9348372231713829945"><span>These methods often involve using the robot's kinematic model, such as the<span> </span><span class="M5tQyf"><a class="DTlJ6d" data-hveid="CAMQAQ" href="https://www.google.com/search?cs=0&amp;sca_esv=cd21e55dc34b3a69&amp;q=Denavit-Hartenberg+%28D-H%29+model&amp;sa=X&amp;ved=2ahUKEwjqhc7QtKKQAxWeoK8BHYEnHsMQxccNegQIAxAB&amp;mstk=AUtExfA-AyyhAwbob41Al8HH44CzV__tU84HTYnOg6GOCdEHI3nhwoORDocTf-3ZWfM1qvHodqcYCc1IimqQPc-yEzqPXAMrvOghXHCZP3OoPGE0JatlZGMQfQIeLvwxW-5PeUqYzp-VADh5e2u6_Mflg6h3Dy5mwu_GbUhDKFnJGO-xqGJM-CvjEXz0EH_PzrTvxw36&amp;csui=3" jsname="TGaAqd">Denavit-Hartenberg (D-H) model</a>,</span><span> </span>to derive a system of equations that can then be solved for the joint angles.</span><span><span> </span></span></span><span class="HzN33d" data-huuid="9348372231713828980"><span>Advanced techniques like<span> </span><a class="DTlJ6d" data-hveid="CAoQAQ" href="https://www.google.com/search?cs=0&amp;sca_esv=cd21e55dc34b3a69&amp;q=screw+theory&amp;sa=X&amp;ved=2ahUKEwjqhc7QtKKQAxWeoK8BHYEnHsMQxccNegQIChAB&amp;mstk=AUtExfA-AyyhAwbob41Al8HH44CzV__tU84HTYnOg6GOCdEHI3nhwoORDocTf-3ZWfM1qvHodqcYCc1IimqQPc-yEzqPXAMrvOghXHCZP3OoPGE0JatlZGMQfQIeLvwxW-5PeUqYzp-VADh5e2u6_Mflg6h3Dy5mwu_GbUhDKFnJGO-xqGJM-CvjEXz0EH_PzrTvxw36&amp;csui=3" jsname="TGaAqd">screw theory</a><span> </span>or<span> </span><a class="DTlJ6d" data-hveid="CAoQAg" href="https://www.google.com/search?cs=0&amp;sca_esv=cd21e55dc34b3a69&amp;q=Gr%C3%B6bner+bases&amp;sa=X&amp;ved=2ahUKEwjqhc7QtKKQAxWeoK8BHYEnHsMQxccNegQIChAC&amp;mstk=AUtExfA-AyyhAwbob41Al8HH44CzV__tU84HTYnOg6GOCdEHI3nhwoORDocTf-3ZWfM1qvHodqcYCc1IimqQPc-yEzqPXAMrvOghXHCZP3OoPGE0JatlZGMQfQIeLvwxW-5PeUqYzp-VADh5e2u6_Mflg6h3Dy5mwu_GbUhDKFnJGO-xqGJM-CvjEXz0EH_PzrTvxw36&amp;csui=3" jsname="TGaAqd">Gröbner bases</a><span> </span>are used to handle complex robot configurations and provide efficient, accurate, and singularity-free solutions.</span><span class="pjBG2e" data-cid="455cfd6c-4809-4032-887c-deb0d38e057c" jsaction="rcuQ6b:npT2md" jscontroller="JHnpme"><span class="UV3uM"> </span></span></span></p>
<p><span class="HzN33d" data-huuid="9348372231713828980"><span class="pjBG2e" data-cid="455cfd6c-4809-4032-887c-deb0d38e057c" jsaction="rcuQ6b:npT2md" jscontroller="JHnpme"><span class="UV3uM"><a href="https://github.com/rpiRobotics/ik-geo">https://github.com/rpiRobotics/ik-geo</a> </span></span></span></p>
<p><span class="HzN33d" data-huuid="9348372231713828980"><span class="pjBG2e" data-cid="455cfd6c-4809-4032-887c-deb0d38e057c" jsaction="rcuQ6b:npT2md" jscontroller="JHnpme"><span class="UV3uM"><a href="https://alefram.github.io/posts/Basic-inverse-kinematics-in-Mujoco">https://alefram.github.io/posts/Basic-inverse-kinematics-in-Mujoco</a> </span></span></span></p>
<p><span class="HzN33d" data-huuid="9348372231713828980"><span class="pjBG2e" data-cid="455cfd6c-4809-4032-887c-deb0d38e057c" jsaction="rcuQ6b:npT2md" jscontroller="JHnpme"><span class="UV3uM"><a href="https://github.com/petercorke/robotics-toolbox-python">https://github.com/petercorke/robotics-toolbox-python</a> </span></span></span></p><h1>Webots</h1>
<p>如何將 MCAD(Mechanical Computer Aided Design) 組立檔案轉為 Webots 場景 .wbt</p>
<h4>URDF(Unified Robot Description Format):</h4>
<p style="padding-left: 30px;"><a href="https://wiki.ros.org/urdf/XML">https://wiki.ros.org/urdf/XML</a> </p>
<p>將 <a href="https://github.com/Rhoban/onshape-to-robot">https://github.com/Rhoban/onshape-to-robot</a> 改寫為 NX-to-robot</p>
<h4>Converter:</h4>
<p style="padding-left: 30px;"><a href="https://github.com/cyberbotics/webots/tree/master/scripts/converter">https://github.com/cyberbotics/webots/tree/master/scripts/converter</a> </p>
<p style="padding-left: 30px;"><a href="https://github.com/cyberbotics/urdf2webots">https://github.com/cyberbotics/urdf2webots</a> </p>
<p style="padding-left: 30px;"><a href="https://github.com/cyberbotics/webots/tree/master/resources/osm_importer">https://github.com/cyberbotics/webots/tree/master/resources/osm_importer</a> </p>
<p style="padding-left: 30px;"><a href="https://suke.uclalemur.org/pcbot/lab2/webots_import/">https://suke.uclalemur.org/pcbot/lab2/webots_import/</a> </p>
<h4>PR:</h4>
<p style="padding-left: 30px;"><a href="https://github.com/cyberbotics/webots/pull/1419">Mesh node</a></p>
<p>利用 <a href="https://mermaid.js.org/">https://mermaid.js.org/</a> 建立 Webots 場景節點流程圖:</p>
<p><a href="/downloads/link0.html">link0.html</a></p>
<pre class="brush:html;auto-links:false;toolbar:false" contenteditable="false">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;script type="module"&gt;
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div class="mermaid"&gt;
flowchart TD
    %% link0
    subgraph L0[link0]
    direction TB

    %% 頂層節點, Plotter 為物件名稱, 中括號內為內置字串
    Plotter[Robot]

    %% 三個主要分支
    Plotter --&gt; Robot物理節點[physics]
    Robot物理節點 --&gt; 物理節點[NULL]

    Plotter --&gt; Robot_boundingObject[boundingObject]
    Robot_boundingObject --&gt; UseLink0[NULL]

    Plotter --&gt; Children[children]
    Children --&gt; DefLink0[DEF Link_0 Shape]
    Children --&gt; HingeJoint[HingeJoint]  
    DefLink0 -.-&gt;UseLink0

    HingeJoint --&gt; Devices[devices]
    Devices --&gt; Motor[RotationalMotor&lt;br/&gt;name: 'motor0']

    HingeJoint --&gt; JointParams[jointparameters]
    JointParams --&gt; HingeParams[HingeJointParameters]

    HingeJoint --&gt; EndPoint[endPoint]
    EndPoint --&gt; Solid[DEF link1 Solid]

    %% 新增三個節點並連接 Solid
    Solid --&gt; Physics2[physics]
    Solid --&gt; Bounding2[boundingobject]
    Solid --&gt; Children2[children]
    end
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<h2>Mermaid</h2>
<p>將 gist 上的 mermaid 流程圖顯示在頁面:</p>
<pre class="brush:html;auto-links:false;toolbar:false" contenteditable="false">&lt;script type="module"&gt;// &lt;![CDATA[
import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

async function loadMermaidFromGist() {
  const res = await fetch('https://gist.githubusercontent.com/mdecycu/ca89be74dfb4daec472df7c31cc935fb/raw/7fa1c03f621614134842daf17647f0a86ff581b7/cad1');
  const code = await res.text();

  const container = document.getElementById('cad1');
  container.className = 'mermaid';        // apply mermaid styling
  container.textContent = code;           // insert Mermaid diagram code as text

  // Initialize Mermaid
  mermaid.initialize({ startOnLoad: false });
  mermaid.init(undefined, container);     // render only this container
}

loadMermaidFromGist();
// ]]&gt;&lt;/script&gt;</pre>
<div id="cad1"></div>
<script type="module">
import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

async function loadMermaidFromGist() {
  const res = await fetch('https://gist.githubusercontent.com/mdecycu/ca89be74dfb4daec472df7c31cc935fb/raw/7fa1c03f621614134842daf17647f0a86ff581b7/cad1');
  const code = await res.text();

  const container = document.getElementById('cad1');
  container.className = 'mermaid';        // apply mermaid styling
  container.textContent = code;           // insert Mermaid diagram code as text

  // Initialize Mermaid
  mermaid.initialize({ startOnLoad: false });
  mermaid.init(undefined, container);     // render only this container
}

loadMermaidFromGist();
</script>