var tipuesearch = {"pages": [{'title': 'About', 'text': '課程名稱: 電腦輔助設計與實習 \n \n 分組倉儲 demo 網站:  https://mde.tw/cad_demo \n demo 倉儲:  https://github.com/mdecycu/cad_demo \xa0 \n 課程評分: \n 學習心得報告 (60%)  - MS Teams 線上參與，6人一組每三週發表學習心得。 \n w3、w7、w10、w14、w17、w18 \n 學習心得報告主題 : \n w3: 用什麼套件完成  5-bar Linkage Plotter  與  Openduck mini  零組件設計繪圖？  Solvespace ,  Siemens NX ,  Onshape  或其他？各有什麼優缺點？ ( plotter.7z ,  open_duck_mini.7z ) \n w7 ( 2a 採 Youtube 影片簡報 ):  5-bar Linkage Plotter  與  Openduck mini \xa0零組件設計繪製完成之後，如何切割零件? 為何要切割零件？ 如何利用  Webots  進行後續的控制系統設計與動態模擬 (Dynamic Simulation)？( plotter_project.7z ) \n w10:  Webots  是什麼？有什麼特點？ 如何進行場景模擬？ 如何用 Python 進行控制系統設計？ ( Tutorial ) \n w14:  Webots  的模型有沒有辦法用程式方法建立? 有沒有辦法直接從 CAD 套件中轉出  Webots  的場景模型？ \n w17: 如何實作一套  5-bar Linkage Plotter  與  Openduck mini ？( Disney Bipedal Robot ) \n w18: 課程總結 \n 個人與分組網站維護 (40%)  - 每週至少兩次推送與課程進度相關的學習內容與心得。 \n w9 期中自評、w18 期末自評 \n', 'tags': '', 'url': 'About.html'}, {'title': 'Reading', 'text': '英文資料基本閱讀能力自我查驗: \n 認不認得這  2000_words.txt ， 5000_words.txt  呢? \n', 'tags': '', 'url': 'Reading.html'}, {'title': 'CAD', 'text': '參數式零組件繪圖相關參考資料: \n AutoDesk Inventor: \n autodesk_inventor_api.7z \n SolidWorks: \n solidworks_basics.pdf \n Solidworks_ref.7z \n Siemens NX: \n nx_python_examples.pdf \n nxopen_python_ref.7z \n NXOpen_Getting_Started_2017.pdf \n NXOpen_Getting_Started_2019.pdf \n SNAP_Getting_Started_v12.pdf \n Solvespace: \n solvespace-documentation.pdf \n https://solvespace.readthedocs.io/en/latest/ \n https://solvespace.com/tutorial.pl \n https://youtu.be/vBNAIMiomls \n https://arachnoid.com/Computer_Aided_Design/index.html \n https://news.ycombinator.com/item?id=30625341 \n https://cq.cx/sketchflat.pl \n https://cq.cx/sketchflat-tutorial.p l \n sketchflat-internals.pdf \n', 'tags': '', 'url': 'CAD.html'}, {'title': 'Design', 'text': 'Math \n 利用基因演算法解決機械設計問題: \n Length = 20 \n 平面五連桿 Plotter 設計目標是針對一組 Length cm×Length cm 的繪圖區域，尋找並最佳化五連桿機構中的三個核心設計變數：連桿 L1、連桿 L2，以及底部距離 distance。最終目的是在確保機構穩定運行的前提下，找到能使連桿尺寸最小化（即材料成本與運動慣性最低）的設計。 一、幾何參數設定 \xa0 \xa0 馬達間距 (LENGTH): 兩側連桿（L1 和 L4）的固定轉軸中心必須保持 Length cm 的水平間距。 \xa0 \xa0 繪圖區域 (W×H): 機構必須能覆蓋一個 Length cm 寬度 (W) 和 Length cm 高度 (H) 的完整矩形區域。 \xa0 \xa0 對稱性要求: 機構必須保持對稱，即 L1=L4 且 L2=L3。 二、最小化優化目標 (Objective) 設計應追求連桿總尺寸的最小化。優化目標 J 定義為： 最小化 J=1.0⋅L1+1.0⋅L2+0.5⋅distance （此權重分配旨在優先最小化連桿長度 L1 和 L2，同時適度控制機構的底部高度 distance。） 三、運動學與工程約束 (Constraints) 設計結果必須嚴格滿足以下三個工程約束，以確保筆尖 C 點在整個繪圖區域內不會遇到死點或不可達的情況。 1. 可達性與外側奇異點迴避 (L1+L2 約束) 連桿 L1 與 L2 的長度總和必須大於機構在繪圖區域最遠點（即 X=Length,Y=distance+Length）處所需的最大距離 Dmax。 這項約束保證了筆尖在最遠處不會發生連桿 L1 和 L2 完全伸直共線（外側奇異點，即 A,B,C 共線）導致的鎖死。 2. 繪圖區域穩定性 (內側奇異點迴避) 連桿 L2 的兩倍長度 (2⋅L2) 必須大於筆尖 C 點在整個 Length cm×Length cm 繪圖區域內時，點 B 到點 D 之間的最大距離 Max(DBD)Area。 更重要的是，為了考慮實際製造公差和控制誤差，必須強制加入 1.0 cm 的安全裕度 (Δ)： 2⋅L2>Max(DBD)Area+1.0 cm 這項約束保證了筆尖在任何位置都不會發生連桿 L2 和 L3 完全伸直共線（內側奇異點，即 B,C,D 共線）導致的控制失效。 3. 轉軸方向約束 (Y 座標約束) 在求解逆運動學時，連桿 L1 和 L4 的擺動點 B 點和 D 點的垂直坐標 (YB 和 YD) 必須始終大於或等於零。 這確保了機構在整個工作過程中始終處於轉軸上方（上搖桿解）的穩定配置，防止機構翻轉至下方區域。 \n redesign_ga1.py \n redesign_ga1.slvs \n 【基因演算法最終最小化尺寸設計結果】 找到**滿足約束且最小化尺寸**的設計（總尺寸 J ≈ 59.44 cm）: L1 (Link 1 & 4) = 21.79 cm L2 (Link 2 & 3) = 26.70 cm Distance (Y-bottom) = 21.89 cm --- 最終設計驗證 --- 1. 最遠點奇異點約束 (L1+L2 > D_max): 48.50 > 46.42 (滿足) 2. 繪圖區域穩定性 (2*L2 > Max(D_BD) + 1.0cm): \xa0 \xa02*L2 = 53.40 cm \xa0 \xa0Max(D_BD) + 1.0 cm = 51.60 + 1.00 = 52.60 cm \xa0 \xa0**裕度滿足 (2*L2 僅略大於所需值，實現最小化)** 3. Y 座標約束 (Y_B, Y_D >= 0): 在逆運動學中已確保 (滿足) \n \n 最小尺寸設計如下: \n 【基因演算法最終最小化尺寸設計結果】 找到**滿足約束且最小化尺寸**的設計（總尺寸 J ≈ 54.97 cm）: L1 (Link 1 & 4) = 20.00 cm L2 (Link 2 & 3) = 25.44 cm Distance (Y-bottom) = 19.04 cm --- 最終設計驗證 --- 1. 最遠點奇異點約束 (L1+L2 > D_max): 45.45 > 43.87 (滿足) 2. 繪圖區域穩定性 (2*L2 > Max(D_BD) + 1.0cm): \xa0 \xa02*L2 = 50.89 cm \xa0 \xa0Max(D_BD) + 1.0 cm = 49.63 + 1.00 = 50.63 cm \xa0 \xa0**裕度滿足 (2*L2 僅略大於所需值，實現最小化)** 3. Y 座標約束 (Y_B, Y_D >= 0): 在逆運動學中已確保 (滿足) \n \n 利用 Python + Sympy 解數學相關題目: \n taming math and physics using sympy.pdf \n sympy_documentation.pdf \n Simulation \n modeling and simulation in python.pdf \n bond_graph_modeling.pdf \n Inverse Kinematics: \n inverse_kinematics_solution_of_a_robotic_manipulator_using_python_(two_link).pdf \n inverse_kinematic_analysis_of_robot_manipulators(dissertation_2015).pdf \n Mechanical Advantage Analysis: \n /downloads/mechanical_advantage_analysis.pdf \n Webots: \n Simulation_of_a_Mobile_Manipulator_on_Webots.pdf', 'tags': '', 'url': 'Design.html'}, {'title': 'Plotter', 'text': '設計要求: \n 使用平面五連桿設計一套能夠在  20cm x 20cm  範圍中進行繪圖的畫圖機 \n 驅動: NEMA 17 步進馬達或 STS3215 系列伺服馬達 \n 首先查詢\xa0NEMA 17 步進馬達與STS3215 系列伺服馬達的規格尺寸。 \n 17 NE2: 42.3mmx42.3mmx34mm (from\xa0 https://www.sumfu.com/step/nema17 ) \n STS3215: 45.23mmx24.73mmx29mm (from  FeeTech ) \n 平面五連桿 plotter 自由度如何計算? \n 計算「平面五連桿機構（Five-bar linkage）」的自由度（Degrees of Freedom, DOF）可以使用「Gruebler-Kutzbach 方程式」來處理。 \n 平面機構的自由度 = 3(包含地面的構件數 - 1) - 2(有一個自由度的接頭數) - 有兩個自由度的接頭數 \n 因此平面五連桿的自由度 = 3(5-1) - 2(5) - 0 = 2，因此設計中的 Plotter 有兩個自由度。 \n 以下設計會讓 BCD 在繪圖範圍成為直線 (singularity)，因此修改設計需求如下，並轉而改用基因演算法進行尺寸設計: \n 五連桿機構設計最佳化：最小化連桿尺寸 本設計的目標是針對一組 20 cm × 20 cm 的繪圖區域，尋找並最佳化三個核心設計變數：連桿 L1、連桿 L2，以及底部距離 distance。最終目的是在確保機構穩定運行的前提下，找到能使連桿尺寸最小化（即材料成本與運動慣性最低）的設計。 一、幾何參數設定 A. 待最佳化設計變數： 1. L1：主連桿/驅動連桿長度（L1 = L4）。 2. L2：副連桿長度（L2 = L3）。 3. distance：機構底部距離（定義馬達中心連線到繪圖區域底邊的垂直距離）。 B. 固定參數： 1. 馬達間距 (LENGTH)：兩側連桿（L1 和 L4）的固定轉軸中心必須保持 20 cm 的水平間距。 2. 繪圖區域 (W×H)：機構必須能覆蓋一個 20 cm 寬度和 20 cm 高度的完整矩形區域。 3. 對稱性要求：機構必須保持對稱，即 L1=L4 且 L2=L3。 二、最小化優化目標 (Objective) \n 設計應追求連桿總尺寸的最小化。優化目標 J 定義為： \n 最小化 J = 1.0 * L1 + 1.0 * L2 + 0.5 * distance \n （此權重分配旨在優先最小化連桿長度 L1 和 L2，同時適度控制機構的底部高度 distance。） \n 三、運動學與工程約束 (Constraints) \n 設計結果必須嚴格滿足以下三個工程約束，以確保筆尖 C 點在整個繪圖區域內不會遇到死點或不可達的情況。 C1. 可達性與外側奇異點迴避 (L1+L2 約束) \n 連桿 L1 與 L2 的長度總和必須大於機構在繪圖區域最遠點所需的最大距離 Dmax。 \n 目的：保證筆尖在最遠處不會發生連桿 L1 和 L2 完全伸直共線（外側奇異點）導致的鎖死。 約束式：L1 + L2 > Dmax \n C2. 繪圖區域穩定性與內側奇異點迴避 \n 連桿 L2 的兩倍長度 (2 * L2) 必須大於筆尖 C 點在整個 20 cm × 20 cm 繪圖區域內時，點 B 到點 D 之間的最大距離 Max(DBD)Area。 安全裕度：必須強制加入 1.0 cm 的安全裕度 (Δ)。 目的：保證筆尖在任何位置都不會發生連桿 L2 和 L3 完全伸直共線（內側奇異點）導致的控制失效。 約束式：2 * L2 > Max(DBD)Area + 1.0 cm \n C3. 轉軸方向約束 (Y 座標約束) \n 在求解逆運動學時，連桿 L1 和 L4 的擺動點 B 點和 D 點的垂直坐標 (YB 和 YD) 必須始終大於或等於零。 \n 目的：確保機構在整個工作過程中始終處於轉軸上方（上搖桿解）的穩定配置，防止機構翻轉至下方區域。 \n 約束式：YB >= 0 且 YD >= 0 \n \n Plotter 尺寸設計: \n 假設左側的馬達中心座標為 (0, 0), 若希望右側的馬達與左側馬達保持水平位置，則右側馬達的座標可設為 (x1, 0), x1 為第一個系統的設計參數。\xa0 \n 若希望繪圖區 20cmx20cm 正方形的下方距離馬達 30mm，則繪圖區的左下角點座標為 (0, 30)， 而右下角點座標則為 (200, 30)， 左上角點的座標為 (0, 230)，右上角點的座標為 (200, 230)。 \n 因此從左側馬達中心點到繪圖區右上角點的距離為: \\[\\sqrt{(200^2 + 230^2)}\\] =\xa0304.7950 \n 若採四個連桿長度都相同的設計，單一桿長的兩倍必須大於\xa0304.7950 \n 以下尋找桿長的設計上限: \n 針對希望繪圖區域為 20cmx20cm 的平面五軸 plotter，初步設計內容如下，試問已知兩倍連桿長度必須大於 304.795, 請問能不能針對合理設計找出兩倍連桿長度必須小於多少的約束條件? 假設左側的馬達中心座標為 (0, 0), 若希望右側的馬達與左側馬達保持水平位置，則右側馬達的座標可設為 (x1, 0), x1 為第一個系統的設計參數。\xa0 \n 若希望繪圖區 20cmx20cm 正方形的下方距離馬達 30mm，則繪圖區的左下角點座標為 (0, 30)， 而右下角點座標則為 (200, 30)， 左上角點的座標為 (0, 230)，右上角點的座標為 (200, 230)。 因此從左側馬達中心點到繪圖區右上角點的距離為: \\[\\sqrt{(200^2 + 230^2)}\\] \n 針對 \\(x\\_1 = 200\\) mm（左右馬達水平間距）來計算這個五軸平面機構的連桿長度範圍。 一、 左馬達到繪圖區右上角的距離（已知）： \\[ L_{\\text{left→RU}} = \\sqrt{200^2 + 230^2} = \\sqrt{40000 + 52900} = \\sqrt{92900} \\approx \\boxed{304.80 \\text{ mm}} \\] 二、右馬達到繪圖區左上角 \\((0, 230)\\) 的距離： 這是對稱點，對應右馬達控制的最遠點： \\[ L_{\\text{right→LU}} = \\sqrt{(200)^2 + (230)^2} = \\sqrt{92900} \\approx \\boxed{304.80 \\text{ mm}} \\] 因為 \\(x_1 = 200\\)，所以左右兩馬達的極限距離對稱 所以，兩倍連桿長度的下限為： \\[ \\boxed{2L_{\\text{min}} > 304.80 \\text{ mm}} \\] 三、上限推導： 雖然理論上兩連桿長度可以非常長，但為了避免結構不穩、精度低落、繪圖區域外擴太多，我們以合理幾何極限來限制上限。 最大極限是： 當筆頭落在兩馬達直線中點的正上方（最大高度），也就是在 \\((100, y)\\)，最高為繪圖區頂端 \\(y = 230\\)，此時： \\[ L_{\\text{center}} = \\sqrt{(100)^2 + (230)^2} = \\sqrt{10000 + 52900} = \\sqrt{62900} \\approx \\boxed{250.80 \\text{ mm}} \\] 所以每支連桿最大約需 250.80 mm，即： \\[ \\boxed{2L_{\\text{max}} \\le 501.60 \\text{ mm}} \\] 最終結果（針對 \\(x_1 = 200\\) mm）： \\[ \\boxed{ \\text{合理的兩倍連桿長度範圍為：} \\quad \\boxed{ 304.80 < 2L \\le 501.60 \\text{ mm} } } \\] 建議設計值： 接下來選擇 2L 稍微大於 305 mm，並保留些許餘裕（比如 310\\(~\\)350 mm）以兼顧活動性與結構穩定性。 例如： 連桿長度 \\(L = 160\\) mm → 2L = 320 mm\xa0 連桿長度 \\(L = 175\\) mm → 2L = 350 mm\xa0 如此 Plotter 不僅可完整覆蓋繪圖區，又不會讓連桿過長造成搖晃或干涉。 \n 設計考量: \n 連桿長度 考量: \n 連桿過長會造成機構搖晃、擺動放大 輕微的驅動誤差或彎曲都會被放大，導致筆尖失準 選擇 \\(2L \\le 350\\) mm 能兼顧結構剛性與控制穩定性，因為精簡的設計原則是希望連桿盡可能短而剛性強，只要能覆蓋工作區即可。 \n 其次考慮 角度靈活性 （Joint Angle Flexibility） \n 在過短的 \\(2L\\) 情況下，某些筆尖位置需要讓兩個關節角度幾乎伸直或壓扁，會造成奇異點問題（singularity)，控制算法難以計算，且反應變慢、系統容易不穩定。 適度延長 \\(2L\\) 讓關節角度變化更自然、更靈活，例如筆尖在中間時，兩支連桿不是筆直對拉，而有良好的角度展開。 \n 針對 控制精度 （Resolution）的考量: \n 以五軸機構而言，連桿越長時，角度一點點改變就會讓筆尖移動很大距離，如此將會造成繪圖解析度下降（resolution drop）。 若 \\(2L\\) 尺寸選擇遠大於繪圖區，筆尖移動時會有過度放大現象。 因此控制在 \\(2L = 310\\sim350\\) mm 可維持一個平衡的解析度。 \n 針對 物理尺寸與成本 （Practicality）的考量: \n 太長的連桿會導致整機體積變大，同時讓連桿本體與承載結構變重、造價也會提高。 因此兩倍連桿的長度設計選擇接近下限、但略微加大其尺寸範圍（如 310–350 mm）最符合成本效益與設計效率。 \n 以上考量 Plotter 尺寸設計採連桿長度 160mm 配置如下 (BCD 在繪圖區域中會形成 singularity): \n \n plotter_dimension_design.slvs \n \n \n', 'tags': '', 'url': 'Plotter.html'}, {'title': '自由度', 'text': '平面機構的自由度推導: 要解釋  Grübler 公式 （或稱 Kutzbach 公式）如何推導出來，需要從平面機構的運動學基本原理出發，逐步分析構件、自由度和約束的關係。以下是 Grübler 公式的推導過程，針對平面五連桿機構的自由度計算： Grübler 公式 \n 平面機構的自由度公式為： \n \\[ DOF = 3(N - 1) - 2J_1 - J_2 \\] \n 其中： \n \\(DOF\\)：機構的自由度。 \\(N\\)：構件數（包括機架）。 \\(J_1\\)：一自由度關節數（例如轉動軸或滑動軸）。 \\(J_2\\)：二自由度關節數。 推導過程 \n 推導 Grübler 公式的核心是計算機構中所有構件的總自由度，然後減去關節施加的約束，得到淨自由度。 一、單一構件的自由度 \n 在平面運動中，每個獨立的構件（不與其他構件連接）有以下自由度： 兩個平移自由度（沿 x 和 y 軸移動）。 一個旋轉自由度（繞 z 軸旋轉，平面運動不考慮其他旋轉）。 因此，每個構件的自由度為 3。 對於一個機構有 \\(N\\) 個構件（包括機架），總自由度為： \n \\[ 3N \\] 二、固定機架的影響 \n 機構通常有一個固定的構件（機架），其自由度完全被約束（即自由度為 0）。為了計算運動構件的自由度，我們從總構件數中減去機架： \n 機架數量為 1，剩餘的運動構件數為 \\(N - 1\\)。 但是，為了統一計算，我們先考慮所有構件的自由度，然後通過約束來減去自由度。 三、關節的約束 \n 關節（joint）限制了構件之間的相對運動，每個關節會減少一定的自由度： \n 單一自由度關節（例如轉動副或滑動副）：這種關節允許一個自由度（例如只允許旋轉或只允許滑動），因此約束了 2 個自由度（因為每個構件原本有 3 個自由度，關節限制了其中 2 個）。 \n 每個一自由度關節的約束數：\\(3 - 1 = 2\\)。 \n 如果有 \\(J_1\\) 個一自由度關節，總約束為：\\(2J_1\\)。 \n 兩個自由度關節（例如平面關節，允許兩個平移或一個平移加一個旋轉）：這種關節只約束 1 個自由度。 \n 每個二自由度關節的約束數：\\(3 - 2 = 1\\)。 \n 如果有 \\(J_2\\) 個二自由度關節，總約束為：\\(J_2\\)。 \n 四、總自由度計算 \n 將所有構件的自由度減去關節的約束，得到機構的總自由度： \n \\[ DOF = 3N - (2J_1 + J_2) \\] 五、考慮機架的固定 \n 機架作為一個構件，其自由度被完全約束（即 3 個自由度被移除）。因此，我們需要考慮機架的影響： 機架固定相當於減去 1 個構件的自由度，即減去 \\(3 \\cdot 1 = 3\\)。 於是，公式調整為僅考慮運動構件的自由度： \n \\[ DOF = 3(N - 1) - (2J_1 + J_2) \\] \n 這就是 Grübler 公式的最終形式。 六、為什麼要減去機架的自由度？ \n 機架固定後，其 3 個自由度（2 個平移 + 1 個旋轉）被約束。 這相當於從總自由度 \\(3N\\) 中減去機架的 \\(3\\)，因此使用 \\(3(N - 1)\\) 來表示運動構件的自由度。 應用到五連桿機構 \n 對於平面五連桿機構： \n \\(N = 5\\)（4 個運動連桿 + 1 個機架）。 \\(J_1 = 5\\)（5 個轉動副）。 \\(J_2 = 0\\)（無二自由度關節）。 代入公式： \n \\[ DOF = 3(5 - 1) - 2 \\cdot 5 - 0 = 3 \\cdot 4 - 10 = 12 - 10 = 2 \\] \n 自由度為 2，符合五連桿機構的特性。 推導的關鍵假設 \n 一、平面運動：公式假設機構在二維平面內運動，每個構件有 3 個自由度。 二、無冗餘約束：公式假設關節的約束是獨立的。如果機構有冗餘約束（例如平行四邊形結構），自由度可能需要進一步分析。 三、關節類型：公式適用於常見的轉動對、滑動對等，若有特殊關節，需重新計算約束。 特殊情況的考慮 \n 如果機構有冗餘約束（例如某些連桿的運動被重複限制），Grübler 公式可能給出不正確的自由度（例如負值或零），這表示機構可能過約束或需要特殊分析。 \n 對於五連桿機構，若結構為閉環且無冗餘約束，自由度通常為 2，這與實際應用（如繪圖機或機械手臂）一致。 \n \n \n \n', 'tags': '', 'url': '自由度.html'}, {'title': 'AI_plotter', 'text': '\n 已知一個平面五連桿繪圖機購得兩個馬達的中心座標位於 (0,0), (200,0), 四根連桿長度皆為 160mm, 若 plotter 繪圖的座標點為 (x,y), (0,0) 位置上的馬達其轉角從正向 X 軸起算, 以逆時針方向為正, 其轉動角度為 t1, 而(200,0) 位置上的馬達其轉角也是從正向 X 軸起算, 也是以逆時針方向為正, 其轉動角度為 t2, 請利用 Python sympy 推導出以 x, y 為輸入變數, 求四組 t1 與 t2 作為輸出的逆向運動方程式。 \n plotter_sympy_inverse_kinematics.py \n Plotter in Onshape \n \n link1 tip center: -24.436, 158.123, 9 (模型放大兩倍，並轉為 m (-0.048872, 0.316246)) pen center: 96.762, 262.578, -3 (模型放大兩倍，並轉為 m，(0.193524,\xa00.525156)) link3 tip center: 218.635, 158.911, 15 (模型放大兩倍，並轉為 m，(0.43727, 0.317822)) right motor center: 200, 0, 15 (模型放大兩倍，並轉為 m，(0.4, 0)) left motor center: 0,0,0 \n Webots 場景檔案: \n plotter_onshape_w3.7z \xa0(僅轉入馬達基座與左側 link1) \n plotter_onshape_w4.7z \xa0(僅轉入馬達基座、左側link1 與 link2) \n 採 matplotlib 模擬四種掃掠 20cmx20cm 正方形邊長的逆向運動學 Solutions: \n cad_demo_sym_formulation.py \n cad_demo_check_sym_sol.py \n Python math 格式: \n def t1_sol1(x, y): return 2 * cmath.atan((320*y - cmath.sqrt(-x**4 - 2*x**2*y**2 + 102400*x**2 - y**4 + 102400*y**2)) / (x**2 + 320*x + y**2))\ndef t2_sol1(x, y): return 2 * cmath.atan((320*y + cmath.sqrt(-x**4 + 800*x**3 - 2*x**2*y**2 - 137600*x**2 + 800*x*y**2 - 8960000*x - y**4 + 22400*y**2 + 2496000000)) / (x**2 - 720*x + y**2 + 104000))\n\n# Solution 2:\ndef t1_sol2(x, y): return 2 * cmath.atan((320*y - cmath.sqrt(-x**4 - 2*x**2*y**2 + 102400*x**2 - y**4 + 102400*y**2)) / (x**2 + 320*x + y**2))\ndef t2_sol2(x, y): return 2 * cmath.atan((320*y - cmath.sqrt(-x**4 + 800*x**3 - 2*x**2*y**2 - 137600*x**2 + 800*x*y**2 - 8960000*x - y**4 + 22400*y**2 + 2496000000)) / (x**2 - 720*x + y**2 + 104000))\n\n# Solution 3:\ndef t1_sol3(x, y): return 2 * cmath.atan((320*y + cmath.sqrt(-x**4 - 2*x**2*y**2 + 102400*x**2 - y**4 + 102400*y**2)) / (x**2 + 320*x + y**2))\ndef t2_sol3(x, y): return 2 * cmath.atan((320*y + cmath.sqrt(-x**4 + 800*x**3 - 2*x**2*y**2 - 137600*x**2 + 800*x*y**2 - 8960000*x - y**4 + 22400*y**2 + 2496000000)) / (x**2 - 720*x + y**2 + 104000))\n\n# Solution 4:\ndef t1_sol4(x, y): return 2 * cmath.atan((320*y + cmath.sqrt(-x**4 - 2*x**2*y**2 + 102400*x**2 - y**4 + 102400*y**2)) / (x**2 + 320*x + y**2))\ndef t2_sol4(x, y): return 2 * cmath.atan((320*y - cmath.sqrt(-x**4 + 800*x**3 - 2*x**2*y**2 - 137600*x**2 + 800*x*y**2 - 8960000*x - y**4 + 22400*y**2 + 2496000000)) / (x**2 - 720*x + y**2 + 104000)) \n \n mathjax 格式: \n JSolution 1 (同上列 math 格式 Solution 2): \\[ t_{1} = 2 \\operatorname{atan}{\\left(\\frac{320 y - \\sqrt{- x^{4} - 2 x^{2} y^{2} + 102400 x^{2} - y^{4} + 102400 y^{2}}}{x^{2} + 320 x + y^{2}} \\right)} \\] \\[ t_{2} = 2 \\operatorname{atan}{\\left(\\frac{320 y - \\sqrt{- x^{4} + 800 x^{3} - 2 x^{2} y^{2} - 137600 x^{2} + 800 x y^{2} - 8960000 x - y^{4} + 22400 y^{2} + 2496000000}}{x^{2} - 720 x + y^{2} + 104000} \\right)} \\] JSolution 2  (同上列 math 格式 Solution 1) : \\[ t_{1} = 2 \\operatorname{atan}{\\left(\\frac{320 y - \\sqrt{- x^{4} - 2 x^{2} y^{2} + 102400 x^{2} - y^{4} + 102400 y^{2}}}{x^{2} + 320 x + y^{2}} \\right)} \\] \\[ t_{2} = 2 \\operatorname{atan}{\\left(\\frac{320 y + \\sqrt{- x^{4} + 800 x^{3} - 2 x^{2} y^{2} - 137600 x^{2} + 800 x y^{2} - 8960000 x - y^{4} + 22400 y^{2} + 2496000000}}{x^{2} - 720 x + y^{2} + 104000} \\right)} \\] JSolution 3  (同上列 math 格式 Solution 4) : \\[ t_{1} = 2 \\operatorname{atan}{\\left(\\frac{320 y + \\sqrt{- x^{4} - 2 x^{2} y^{2} + 102400 x^{2} - y^{4} + 102400 y^{2}}}{x^{2} + 320 x + y^{2}} \\right)} \\] \\[ t_{2} = 2 \\operatorname{atan}{\\left(\\frac{320 y - \\sqrt{- x^{4} + 800 x^{3} - 2 x^{2} y^{2} - 137600 x^{2} + 800 x y^{2} - 8960000 x - y^{4} + 22400 y^{2} + 2496000000}}{x^{2} - 720 x + y^{2} + 104000} \\right)} \\] JSolution 4  (同上列 math 格式 Solution 3) : : \\[ t_{1} = 2 \\operatorname{atan}{\\left(\\frac{320 y + \\sqrt{- x^{4} - 2 x^{2} y^{2} + 102400 x^{2} - y^{4} + 102400 y^{2}}}{x^{2} + 320 x + y^{2}} \\right)} \\] \\[ t_{2} = 2 \\operatorname{atan}{\\left(\\frac{320 y + \\sqrt{- x^{4} + 800 x^{3} - 2 x^{2} y^{2} - 137600 x^{2} + 800 x y^{2} - 8960000 x - y^{4} + 22400 y^{2} + 2496000000}}{x^{2} - 720 x + y^{2} + 104000} \\right)} \\] \n 上列符號式求解(Symbolic Formulation)與圖形法求解進行比較: \n Plotter 到達點 (200, 230) 時的 t1 與 t2 角度（degree）: JSolution 3  (同上列 math 格式 Solution 4) : \n t1 = 66.72° \n t2 = 45.95° \n \n \n \n', 'tags': '', 'url': 'AI_plotter.html'}, {'title': 'P_onshape', 'text': '\n \n plotter_dimension_design_2.slvs \n webots_plotter_sympy.py \n webots_verification.py \n \n import cmath\nimport math\n\n# Solution 3:\ndef t1_sol3(x, y):\n    rad = 2.0 * cmath.atan(\n        (1280.0 * y + cmath.sqrt(\n            -4000000.0 * x**4\n            - 3200000.0 * x**3\n            - 8000000.0 * x**2 * y**2\n            - 4000000.0 * x**2 * y\n            + 178400.0 * x**2\n            - 3200000.0 * x * y**2\n            - 1600000.0 * x * y\n            + 327360.0 * x\n            - 4000000.0 * y**4\n            - 4000000.0 * y**3\n            - 181600.0 * y**2\n            + 409200.0 * y\n            + 125911.0\n        ) + 320.0) / (\n            2000.0 * x**2 + 2080.0 * x + 2000.0 * y**2 + 1000.0 * y + 461.0\n        )\n    )\n    return math.degrees(rad.real)\n\ndef t2_sol3(x, y):\n    rad = 2.0 * cmath.atan(\n        (1280.0 * y - cmath.sqrt(\n            -4000000.0 * x**4\n            + 3200000.0 * x**3\n            - 8000000.0 * x**2 * y**2\n            - 4000000.0 * x**2 * y\n            + 178400.0 * x**2\n            + 3200000.0 * x * y**2\n            + 1600000.0 * x * y\n            - 327360.0 * x\n            - 4000000.0 * y**4\n            - 4000000.0 * y**3\n            - 181600.0 * y**2\n            + 409200.0 * y\n            + 125911.0\n        ) + 320.0) / (\n            2000.0 * x**2 + 480.0 * x + 2000.0 * y**2 + 1000.0 * y - 51.0\n        )\n    )\n    return math.degrees(rad.real)\n\n# 測試\nprint(t1_sol3(0.2, 0.185), t2_sol3(0.2, 0.185))\n \n 利用右上方最遠的繪圖點進行上列 Solution 3 方程式查驗: \n plotter_dimension_design_2.slvs \n webots_ik_right_top_corner.py \xa0執行控制後機構模擬如下，之後可以修改此一程式透過 t1_ik(x, y) 與 t2_ik(x, y) 求得 plotter 繪圖點座標設置為繪圖區各點時的 t1 與 t2 馬達旋轉角度，其量測參考線為馬達右側的水平線作為起點，且逆時針方向為正。 \n plotter 零組件轉檔、 Webots 場景與控制器程式:\xa0 plotter_onshape_w5.7z ，請各組根據此參考資料，嘗試讓 plotter 可以在繪圖區 (目前為 0.4mx0.4m) 繪製任何線架構圖形。隨後可進一步加入提筆機構，並考量若進行實作原型時，該如何從 Webcam 取得的相片圖檔，轉換為可讓 plotter 繪製的線段圖形。 \n \n \n webots_check_sol3.py \n pythonw.exe -u "webots_check_sol3.py" --- Solution 3 at P(0.2, 0.185) --- t1 (Radians): (1.221335238965607+0j) t2 (Radians): (0.7473365120313953+0j) ------------------------------------------ t1 (Degrees): 69.9774 degrees t2 (Degrees): 42.8192 degrees \n \n', 'tags': '', 'url': 'P_onshape.html'}, {'title': 'P_webots', 'text': 'Webots 場景中的 hingejoint 是以機構的初始角度作為 0 度。 \n 轉入 Webots 的\xa0 Plotter in Onshape \xa0其機構初始設置為: \n \n 若以逆時針轉角為正， t1 必須反轉 8.78 度才能達到垂直的位置，而 t2 則必須正轉 6.69 度才能達到垂直的位置。 \n 若兩個馬達都以水平線作為 0 度，則處了考慮從垂直角度位置，還必須逆轉 90 度才能到達水平的零點轉角位置。 \n 此一角度座標定義，可以利用  webots_plotter_zero_degree.py \xa0控制程式，讓兩個馬達的轉角設置在水平位置。 \n \n plotter_onshape_w4.7z \n \n 兩種建立剛體的方法 url 給定 OBJ 或 STL 檔案所在相對位置: \n Solid  -  Shape  -  Mesh  - url \n CadShape  - url \n 利用 boundingObject 界定物件碰撞檢測範圍: \n boundingObject USE shape \n SolidReference  設定於 link3 端點，且參照 link4_solid，表示第四旋轉軸既位於 link3，同時也必須位於 link4，讓 Webots 透過此一 closed chain 約束條件，於系統方程式運算時，能夠模擬封閉連桿機構的運動。 \n \n 從\xa0 Plotter in Onshape \xa0以  STL  格式轉出後，利用\xa0 split_stl_to_obj_scale2_w_mtl.py ，以兩倍原始尺寸分割零件為  OBJ  格式後，轉進 Webots 建立第一階段的模擬場景: 僅 link1 轉動:\xa0 plotter_onshape_link1.7z \n', 'tags': '', 'url': 'P_webots.html'}, {'title': 'Openduck', 'text': 'Open Duck Mini  是一款模組化、開源的雙足仿生機器人平台，專為教育與研究設計，具備高自由度與低成本特性。 \n \n Openduck in Onshape \n https://github.com/apirrone/Open_Duck_reference_motion_generator \xa0 \n https://github.com/mdecycu/Open_Duck_Blender \xa0 \n openduck_frame.7z \xa0(parasolid in NX2312) \n Openduck in Solvespace: \n \n Inverse Kinematic Solutions:\xa0 \n https://github.com/rpiRobotics/ik-geo \xa0 \n https://pypi.org/project/ik-geo/ \xa0 \n https://github.com/weigao95/yaik \xa0 \n https://github.com/rpiRobotics/rpi_general_robotics_toolbox_py \xa0 \n IK-Geo: Unified robot inverse kinematics using subproblem decomposition \n \n IK‑Geo 是一個針對 6 自由度全旋轉關節機器人（6R manipulator） 的逆運動學解法，採用「子問題分解法（subproblem decomposition）」的方式，把整個 IK 問題拆成六種幾何子問題（如圓與點、兩圓之交、圓與平面、圓與球、三圓交、四圓交）來逐步求解。 \n 對於某些特定的機構構型（例如有三個交會或平行軸線的 6R 機構），它能用閉式（closed-form）方式解出所有解，而無需數值搜尋。其他構型則可能退化為對一或兩個關節角做 1D 或 2D 搜索。 \n 作者宣稱對於許多常見工業 6R機器人（例如 UR5 等），IK-Geo 的速度能比 IKFast 快 40 倍以上。 \n IK-Geo 也具備處理奇異情況的能力（比如在解不存在時提供最小平方近似解或連續近似解）以增加解題穩健性。 \n 實作上，IK-Geo 提供 MATLAB、C++、Rust、Python 等多語言版本，並附有測試範例與效能比較。 \n IK-Geo 的主要特點是其採用幾何分解，加上部分搜尋混合的策略，以在效率與泛用性之間取得不錯的折衷。 \n \n 其他參考資料:\xa0 Automatic Geometric Decomposition for Analytical Inverse Kinematics \n \n 設計規格： \n \n 使用 12 顆  FeeTech STS3215  伺服馬達（7.4V，19kg·cm 扭矩）+ 2 顆  Miuzei 9g 輔助伺服 ，實現 14 個自由度（雙足腿部 10 DOF，頭頸 4 DOF），支援穩定步態、轉向與精確感測定位。 \n 機身採用 3D 列印（PLA 機身硬性結構/TPU 腳底軟性結構），尺寸約 42cm 高，總重約 1.0–1.3kg。 \n 控制單元為  Raspberry Pi Zero WH ，支援 Wi-Fi/Bluetooth 與模組化感測器擴充（如 IMU、攝影機）。電源為 7.4V 2S（2 顆  18650 電池 ），峰值電流 4–7A。提供  CAD 、韌體與原始碼，採開放授權，零件公開取得，BOM 總成本約$400 美元。 \n \n', 'tags': '', 'url': 'Openduck.html'}, {'title': 'Webots', 'text': '如何將 MCAD(Mechanical Computer Aided Design) 組立檔案轉為 Webots 場景 .wbt \n URDF(Unified Robot Description Format): \n https://wiki.ros.org/urdf/XML \xa0 \n 將\xa0 https://github.com/Rhoban/onshape-to-robot \xa0改寫為 NX-to-robot \n Converter: \n https://github.com/cyberbotics/webots/tree/master/scripts/converter \xa0 \n https://github.com/cyberbotics/urdf2webots \xa0 \n https://github.com/cyberbotics/webots/tree/master/resources/osm_importer \xa0 \n https://suke.uclalemur.org/pcbot/lab2/webots_import/ \xa0 \n PR: \n Mesh node \n 利用  https://mermaid.js.org/ \xa0建立 Webots 場景節點流程圖: \n link0.html \n <!DOCTYPE html>\n<html lang="en">\n  <script type="module">\n    import mermaid from \'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs\';\n    mermaid.initialize({ startOnLoad: true });\n  </script>\n</head>\n<body>\n  <div class="mermaid">\nflowchart TD\n    %% link0\n    subgraph L0[link0]\n    direction TB\n\n    %% 頂層節點, Plotter 為物件名稱, 中括號內為內置字串\n    Plotter[Robot]\n\n    %% 三個主要分支\n    Plotter --> Robot物理節點[physics]\n    Robot物理節點 --> 物理節點[NULL]\n\n    Plotter --> Robot_boundingObject[boundingObject]\n    Robot_boundingObject --> UseLink0[NULL]\n\n    Plotter --> Children[children]\n    Children --> DefLink0[DEF Link_0 Shape]\n    Children --> HingeJoint[HingeJoint]  \n    DefLink0 -.->UseLink0\n\n    HingeJoint --> Devices[devices]\n    Devices --> Motor[RotationalMotor<br/>name: \'motor0\']\n\n    HingeJoint --> JointParams[jointparameters]\n    JointParams --> HingeParams[HingeJointParameters]\n\n    HingeJoint --> EndPoint[endPoint]\n    EndPoint --> Solid[DEF link1 Solid]\n\n    %% 新增三個節點並連接 Solid\n    Solid --> Physics2[physics]\n    Solid --> Bounding2[boundingobject]\n    Solid --> Children2[children]\n    end\n  </div>\n</body>\n</html>\n \n', 'tags': '', 'url': 'Webots.html'}, {'title': 'Mermaid', 'text': '將 gist 上的 mermaid 流程圖顯示在頁面: \n <script type="module">// <![CDATA[\nimport mermaid from \'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs\';\n\nasync function loadMermaidFromGist() {\n  const res = await fetch(\'https://gist.githubusercontent.com/mdecycu/ca89be74dfb4daec472df7c31cc935fb/raw/7fa1c03f621614134842daf17647f0a86ff581b7/cad1\');\n  const code = await res.text();\n\n  const container = document.getElementById(\'cad1\');\n  container.className = \'mermaid\';        // apply mermaid styling\n  container.textContent = code;           // insert Mermaid diagram code as text\n\n  // Initialize Mermaid\n  mermaid.initialize({ startOnLoad: false });\n  mermaid.init(undefined, container);     // render only this container\n}\n\nloadMermaidFromGist();\n// ]]></script> \n \n', 'tags': '', 'url': 'Mermaid.html'}]};